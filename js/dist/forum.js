(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["common/app"];var o=t.n(e);const n=flarum.core.compat["common/extend"],r=flarum.core.compat["common/components/TextEditor"];var a=t.n(r);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}const s=flarum.core.compat["common/Component"];var l=t.n(s);const u=flarum.core.compat["common/components/Button"];var p=t.n(u);const f=flarum.core.compat["common/components/Tooltip"];var d=t.n(f);function b(t,e,o){return t?e:o||""}function y(t,e){var o=t;return function(){var t=o;return o+=e,t}}const h=flarum.core.compat["common/utils/classList"];var g=t.n(h);const v=flarum.core.compat["forum/app"];var x=t.n(v);const w=flarum.core.compat["common/utils/styleSelectedText"];var k=t.n(w);function T(t,e){var o,n=t;if(null==(o=n)||!o.el){var r=document.querySelector(".ComposerBody .ProseMirror")||document.querySelector(".RichTextEditor .ProseMirror")||null;r&&(n=Object.assign({},n,{el:r}))}try{k()(n,e)}catch(t){var a,i,c,s=""+(null!=(a=null==e?void 0:e.prefix)?a:"")+(null!=(i=null==e?void 0:e.suffix)?i:""),l=null==(c=x().composer)?void 0:c.editor;null!=l&&l.replaceSelection?l.replaceSelection(s):null!=l&&l.insertAtCursor&&l.insertAtCursor(s)}}function N(t,e){var o,n,r,a=(null==(o=t.offsetParent())||null==(n=o.offset())?void 0:n.left)||0,i=(null==(r=t.offset())?void 0:r.left)||0,c=$(document.body).width()||0,s=e.width()||0,l=i;l+s>c&&(l=c-s),l<0&&(l=0),e.css({left:l-a})}var B=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).selectedSub="",e}c(e,t);var o=e.prototype;return o.view=function(t){var o=this,n=this.attrs.rows||1,r=this.attrs.tagCollect.get(),a=r.filter((function(t){return"group"===t.type})),i=(this.attrs.bottom||0)+3;return m("div",{className:g()("ButtonBar",this.attrs.className),style:"bottom:"+i+"px;"},this.getTags(r,n),a.map((function(t){return e.component({editor:o.attrs.editor,tagCollect:t.tags,className:"SubButtons"+b(o.selectedSub===t.name," show",""),rows:t.rows,bottom:36*n})})))},o.onupdate=function(e){t.prototype.onupdate.call(this,e),this.selectedSub&&N($(this.element).find(".Button.selected"),$(this.element).children(".show"))},o.getTags=function(t,e){for(var o=[[]],n=Math.floor((t.length+e-1)/e),r=0,a=0;a<t.length;a++)o[r].push(this.getTagComponent(t[a])),(a+1)%n==0&&(r++,o.push([]));return o.map((function(t){return m("div",{className:"ButtonBar-row"},t)}))},o.getTagComponent=function(t){if("space"===t.type)return m("div",{className:"ButtonBar-space"});if("collect"===t.type)return t.component;var e="Button Button--link";return"group"===t.type&&(e+=" GroupBtn"),"string"==typeof t.icon&&(e+=" Button--icon"),t.name===this.selectedSub&&(e+=" selected"),t.icon?"string"==typeof t.icon?m(d(),{text:t.tooltip,position:"bottom"},m(p(),{className:e,icon:t.icon,onclick:this.clickEventWarper(t)})):"function"==typeof t.icon?m(d(),{text:t.tooltip,position:"bottom"},m(p(),{className:e,onclick:this.clickEventWarper(t)},t.icon())):m(d(),{text:t.tooltip,position:"bottom"},m(p(),{className:e,onclick:this.clickEventWarper(t)},t.icon.component.component(t.icon.attrs))):m(p(),{className:e,onclick:this.clickEventWarper(t)},t.tooltip)},o.clickEventWarper=function(t){var e=this;return function(o){o.currentTarget.blur(),e.clickEvent(t)}.bind(this)},o.clickEvent=function(t){var e=this;if("group"===t.type)this.selectedSub=t.name,m.redraw();else if("button"===t.type)if("function"!=typeof t.style)T(this.attrs.editor,t.style);else{var o=t.style();o instanceof Promise?o.then((function(t){return t&&T(e.attrs.editor,t)})):o&&T(this.attrs.editor,o)}},e}(l());const E=flarum.core.compat["common/utils/ItemList"];var A=t.n(E),M=function(){function t(){this.tags=new(A()),this.spaceKey=0}var e=t.prototype;return e.getTranslation=function(t){return"string"==typeof t?x().translator.trans(t):x().translator.trans(t.key,t.params)},e.add=function(t,e,o,n,r){return this.tags.add(e,{type:"button",name:e,icon:o,tooltip:this.getTranslation(n),style:r},t),this},e.collect=function(t,e,o){this.tags.add(e,{type:"collect",name:e,component:o},t)},e.space=function(t){return this.tags.add("space-"+this.spaceKey++,{type:"space"},t),this},e.group=function(e,o,n,r,a,i){void 0===i&&(i=1);var c=new t;return a(c),this.tags.add(o,{type:"group",name:o,icon:n,tooltip:this.getTranslation(r),tags:c,rows:i},e),c},e.item=function(t){return this.tags.get(t)},e.clear=function(){var t=this;Object.keys(this.tags.toObject()).forEach((function(e){return t.tags.remove(e)}))},e.remove=function(t){this.tags.remove(t)},e.get=function(){var t=this.tags.toArray(),e=x().forum.attribute("bbcode-disable");return t.filter((function(t){return!e[t.itemName]})).reverse()},t}();function D(t){return x().translator.trans("xypp-more-bbcode.forum.common."+t)+""}function O(t){var e,o,n=((null==(e=x().session)||null==(o=e.user)?void 0:o.preferences())||{})["xypp-more-bbcode-"+t];return n||(n=x().forum.attribute("xypp-more-bbcode-"+t)),n}function j(t,e){return function(){return"all"===(o=O("pref-markdown"))||"none"!==o&&S()?e:t;var o}}function S(){return _(O("collect-all"))}function _(t){if("none"==t)return!1;if("all"==t)return!0;var e=x().screen();return"phone"===t&&"phone"===e||"tablet"===t&&("phone"===e||"tablet"===e)}function P(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return Object.assign.apply(Object,[{}].concat(e))}function C(t,e,o){return void 0===o&&(o=!0),e||(e=t),{prefix:t,suffix:e,trimFirst:o}}function H(t,e){return void 0===e&&(e=!0),{prefix:t,trimFirst:e}}function z(t,e){void 0===e&&(e=!1);var o=/\[([a-zA-Z0-9_-]+)/.exec(t);return o?C(t,"[/"+o[1]+"]",e):{}}const q=flarum.core.compat["common/components/Modal"];var F=t.n(q);const I=flarum.core.compat["common/components/Select"];var L=t.n(I);function W(t,e){var o=x().translator.trans("xypp-more-bbcode.forum.alert."+t,e);return Array.isArray(o)?o.join(""):o}var R=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).done=!1,e.typesOpt={},e.availableMap={success:["a","b","c","d"],warning:["a","b","c","d"],error:["a","b","c","d"],notice:["a","b","c","d"],basic:["a"],custom:["a","b"]},e.colorMap={success:["green","white","green"],error:["red","white","red"],notice:["teal","white","teal"],warning:["darkorange","white","darkorange"],custom:["red","white","red"]},e.available=["a","b","c","d"],e.type="notice",e.style="a",e}c(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.typesOpt={success:W("type.success")+"",warning:W("type.warning")+"",error:W("type.error")+"",notice:W("type.notice")+"",basic:W("type.basic")+"",custom:W("type.custom")+""}},o.className=function(){return"alertPreviewModal Modal--small"},o.title=function(){return W("title")},o.content=function(){var t=this,e={};return this.available.forEach((function(t){e[t]=t})),m("div",{className:"Modal-body"},m("div",{className:"Form-group"},m("label",{for:"xypp-more-bbcode-alert-type"},W("type.label")),m(L(),{options:this.typesOpt,value:this.type,onchange:function(e){t.type=e,t.available=t.availableMap[e]}.bind(this)})),m("div",{className:"Form-group"},m("label",{for:"xypp-more-bbcode-alert-type"},W("style")),m(L(),{options:e,value:this.style,onchange:function(e){t.style=e}.bind(this)})),m("div",{className:"bbcode-alert-preview"}),m(p(),{className:"Button Button--primary",type:"submit"},W("insert")))},o.generateStyle=function(){var t=this.style,e=this.type;if("custom"===this.type)return"a"===this.style?z("[acustom]"+this.colorMap.custom.join(",")+","+W("defaults.content",{type:e,style:t})):"b"===this.style?z("[bcustom]title="+W("defaults.content",{type:e,style:t})+" font="+this.colorMap.custom[0]+" bg="+this.colorMap.custom[1]+" border="+this.colorMap.custom[2]):{};switch(this.style){case"a":return z("[a"+this.type+"]"+W("defaults.content",{type:e,style:t}));case"b":return z("[b"+this.type+"]"+W("defaults.content",{type:e,style:t}));case"c":return z("[c"+this.type+"]"+this.colorMap[e].join(",")+","+W("defaults.title")+","+W("defaults.content",{type:e,style:t}));case"d":return z("[d"+this.type+" title="+W("defaults.title")+" font="+this.colorMap.custom[0]+" bg="+this.colorMap.custom[1]+" border="+this.colorMap.custom[2]+"]"+W("defaults.content",{type:e,style:t}));default:return{}}},o.generateBBCode=function(){var t=this.generateStyle();return t.prefix+""+(t.suffix||"")},o.onupdate=function(e){t.prototype.onupdate.call(this,e),s9e.TextFormatter.preview(this.generateBBCode(),this.$(".bbcode-alert-preview")[0])},o.onsubmit=function(t){t.preventDefault(),this.done=!0,this.attrs.onsubmit(this.generateStyle()),x().modal.close()},o.onbeforeremove=function(t){this.done||this.attrs.oncancel()},e}(F());const Y=flarum.core.compat["forum/components/CommentPost"];var G=t.n(Y);const K=flarum.core.compat["forum/components/ComposerPostPreview"];var U=t.n(K);function Z(){return new Promise((function(t,e){x().modal.show(R,{onsubmit:t,oncancel:e})}))}var J=0;function Q(){this.$(".tabs").each((function(t,e){var o=$(e);if(!o.find('input[type="radio"][name]').length){var n=o.find('.tabs-title > .tab > input[type="radio"]');if(n.length){var r=o.find(".tab"),a=J++;n.attr("name","tab-group-"+a),n.is("[checked]")||n[0].setAttribute("checked","checked"),r.each((function(t,e){var o=$(e),n="tab-"+a+"-"+ ++t;o.find('input[type="radio"]').attr("id",n),o.find("label").attr("for",n)}))}}}))}const V=flarum.core.compat["common/components/TextEditorButton"];var X=t.n(V);function tt(t,e){var o=x().translator.trans("xypp-more-bbcode.forum.cloud."+t,e);return Array.isArray(o)?o.join(""):o}var et=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).done=!1,e.opts={},e.type="other",e}c(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.opts=x().forum.attribute("bbcode-cloud")},o.className=function(){return"alertPreviewModal Modal--small"},o.title=function(){return tt("title")},o.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form-group"},m("label",{for:"xypp-more-bbcode-cloud-type"},tt("type.label")),m(L(),{options:this.opts,value:this.type,onchange:function(e){t.type=e}.bind(this)})),m("div",{className:"bbcode-cloud-preview"}),m(p(),{className:"Button Button--primary",type:"submit"},tt("insert")))},o.generateStyle=function(){return z('[cloud type="'+this.type+'" title="'+D("title")+'" url="'+D("url")+'"]'+tt("content.defaults"))},o.generateBBCode=function(){var t=this.generateStyle();return t.prefix+""+(t.suffix||"")},o.onupdate=function(e){t.prototype.onupdate.call(this,e),s9e.TextFormatter.preview(this.generateBBCode(),this.$(".bbcode-cloud-preview")[0])},o.onsubmit=function(t){t.preventDefault(),this.done=!0,this.attrs.onsubmit(this.generateStyle()),x().modal.close()},o.onbeforeremove=function(t){this.done||this.attrs.oncancel()},e}(F());function ot(){return new Promise((function(t,e){x().modal.show(et,{onsubmit:t,oncancel:e})}))}const nt=flarum.core.compat["forum/components/DiscussionPage"];var rt=t.n(nt);const at=flarum.core.compat["forum/utils/DiscussionControls"];var it=t.n(at);const ct=flarum.core.compat["forum/components/LogInModal"];var st=t.n(ct);const lt=flarum.core.compat["common/components/FieldSet"];var ut=t.n(lt);const pt=flarum.core.compat["forum/components/SettingsPage"];var mt=t.n(pt);function ft(t,e){var n=o().translator.trans("xypp-more-bbcode.forum."+t,e);return Array.isArray(n)?n.join(""):n}o().initializers.add("xypp/more-bbcode",(function(){var t=new M,e=y(100,100);!function(t,e){t.group(e(),"fonts","fas fa-bold","xypp-more-bbcode.forum.fonts.title",(function(t){var e=y(100,100);t.add(e(),"bold","fas fa-bold","xypp-more-bbcode.forum.fonts.bold",j(z("[b]"),C("**"))),t.add(e(),"italic","fas fa-italic","xypp-more-bbcode.forum.fonts.italic",j(z("[i]"),C("*"))),t.add(e(),"strike-through","fas fa-strikethrough","xypp-more-bbcode.forum.fonts.strike_through",j(z("[del]"),C("~~"))),t.add(e(),"underline","fas fa-underline","xypp-more-bbcode.forum.fonts.underline",z("[ins]"))})),t.group(e(),"typography","fas fa-paragraph","xypp-more-bbcode.forum.typography.title",(function(t){var e=y(100,100);t.add(e(),"url","fas fa-link","xypp-more-bbcode.forum.typography.link",j(z("[URL="+D("url")+" title="+D("title")+"]"),P(C("[","]("+D("url")+")"),{replaceNext:"https://",scanFor:"https?://"}))),t.add(e(),"image","fas fa-image","xypp-more-bbcode.forum.typography.image",j(H('[IMG src="'+D("url")+'" title="'+D("title")+'" alt="'+D("simple")+'" height="auto" width="auto"]'),P(C("![","]("+D("url")+")"),{replaceNext:"https://",scanFor:"https?://"}))),t.add(e(),"quote","fas fa-quote-right","xypp-more-bbcode.forum.typography.quote",j(P(z("[quote]"),{multiline:!0}),P(H("> "),{multiline:!0,surroundWithNewlines:!0}))),t.add(e(),"code","fas fa-code","xypp-more-bbcode.forum.typography.code",j(P(z("[code lang="+D("any")+"]"),{multiline:!0}),P(C("`",void 0,!1),{blockPrefix:"```",blockSuffix:"```"}))),t.add(e(),"spoiler","fas fa-eye-slash","xypp-more-bbcode.forum.typography.spoiler",j(P(z("[spoiler title="+D("title")+"]"),{multiline:!0}),P(C(">!","!<"),{blockPrefix:">! ",multiline:!0}))),t.add(e(),"dropcap","fas fa-caret-right","xypp-more-bbcode.forum.typography.dropcap",z("[dropcap] ")),t.space(e()),t.add(e(),"horizontal-line","fas fa-minus","xypp-more-bbcode.forum.typography.horizontal_line",z("[hr]")),t.add(e(),"table","fas fa-table","xypp-more-bbcode.forum.typography.table",j(H("\n[TABLE]\n    [THEAD]\n        [TH]"+D("column")+"[TH]\n        [TH]"+D("column")+"[TH]\n        [TH]"+D("any")+"[TH]\n    [/THEAD]\n    [TBODY]\n        [TR]\n            [TD]"+D("text")+"[TD]\n            [TD]"+D("text")+"[TD]\n            [TD]"+D("any")+"[TD]\n        [/TR]\n    [/TBODY]\n[/TABLE]\n"),H("\n| "+D("column")+" | "+D("column")+" | "+D("column")+" | "+D("column")+" |\n|---|---|---|---|\n| "+D("any")+" | "+D("any")+" | "+D("any")+" | "+D("any")+" |\n"))),t.add(e(),"list-ul","fas fa-list-ul","xypp-more-bbcode.forum.typography.unordered_list",j(H("\n[list]\n[*]"+D("any")+"\n[*]"+D("any")+"\n[*]"+D("any")+"\n[/list]\n"),P(H("\n- "),{multiline:!0,surroundWithNewlines:!0}))),t.add(e(),"list-ol","fas fa-list-ol","xypp-more-bbcode.forum.typography.ordered_list",j(H("\n[list=1]\n[*]"+D("any")+"\n[*]"+D("any")+"\n[*]"+D("any")+"\n[/list]\n"),P(H("\n1. "),{multiline:!0,orderedList:!0,surroundWithNewlines:!0})))})),t.group(e(),"heading","fas fa-heading","xypp-more-bbcode.forum.heading.title",(function(t){var e=y(100,100);[1,2,3,4,5,6].forEach((function(o){t.add(e(),"heading-"+o,!1,{key:"xypp-more-bbcode.forum.heading.label",params:{level:o}},j(z("[H"+o+"]"),C("#".repeat(o)+" "," "+"#".repeat(o))))}))})),t.group(e(),"align","fas fa-align-justify","xypp-more-bbcode.forum.align.title",(function(t){var e=y(100,100);t.add(e(),"align-left","fas fa-align-left","xypp-more-bbcode.forum.align.align_left",z("[left]")),t.add(e(),"align-center","fas fa-align-center","xypp-more-bbcode.forum.align.align_center",z("[center]")),t.add(e(),"align-right","fas fa-align-right","xypp-more-bbcode.forum.align.align_right",z("[right]")),t.add(e(),"justify","fas fa-align-justify","xypp-more-bbcode.forum.align.align_justify",z("[justify]")),t.space(e()),t.add(e(),"padding-left","fas fa-arrow-alt-circle-left","xypp-more-bbcode.forum.align.padding_left",z("[pleft]")),t.add(e(),"padding-right","fas fa-arrow-alt-circle-right","xypp-more-bbcode.forum.align.padding_right",z("[pright]")),t.space(e()),t.add(e(),"image-left",(function(){return m("div",{className:"stackIcon"},m("i",{className:"fas fa-image main"}),m("i",{className:"fas fa-arrow-alt-circle-left lb-corner"}))}),"xypp-more-bbcode.forum.align.image_left",z("[ileft]")),t.add(e(),"image-center",(function(){return m("div",{className:"stackIcon"},m("i",{className:"fas fa-image main"}),m("i",{className:"fas fa-arrow-alt-circle-up cb-corner"}))}),"xypp-more-bbcode.forum.align.image_center",z("[icenter]")),t.add(e(),"image-right",(function(){return m("div",{className:"stackIcon"},m("i",{className:"fas fa-image main"}),m("i",{className:"fas fa-arrow-alt-circle-right rb-corner"}))}),"xypp-more-bbcode.forum.align.image_right",z("[iright]"))})),t.group(e(),"size","fas fa-text-height","xypp-more-bbcode.forum.size.title",(function(t){var e=y(100,100);[18,20,22,24,26,28,30,32,34,36,38,40].forEach((function(o){t.add(e(),"size-"+o,!1,{key:"xypp-more-bbcode.forum.size.label",params:{size:o}},z("[size="+o+"]"))}))}),2),t.group(e(),"color","fas fa-palette","xypp-more-bbcode.forum.color.title",(function(t){var e=y(100,100);["grey","green","blue","purple","yellow","orange","red","silver","pink","brown","white","black"].forEach((function(o){t.add(e(),"color-"+o,(function(){return m("span",{style:"background:"+o+";",className:"color-indicator text"},"A")}),{key:"xypp-more-bbcode.forum.color.label",params:{color:o}},z("[color="+o+"]"))}))}),2),t.group(e(),"background",(function(){return m("i",{className:"fas fa-fill-drip"})}),"xypp-more-bbcode.forum.background.title",(function(t){var e=y(100,100);["grey","green","blue","purple","yellow","orange","red","silver","pink","brown","white","black"].forEach((function(o){t.add(e(),"background-"+o,(function(){return m("span",{style:"background:"+o+";",className:"color-indicator back"})}),{key:"xypp-more-bbcode.forum.background.label",params:{color:o}},z("[background="+o+"]"))}))}),2),t.group(e(),"sign","fas fa-superscript","xypp-more-bbcode.forum.sign.title",(function(t){var e=y(100,100);t.add(e(),"superscript","fas fa-superscript","xypp-more-bbcode.forum.sign.superscript",z("[sup]")),t.add(e(),"subscript","fas fa-subscript","xypp-more-bbcode.forum.sign.subscript",z("[sub]")),t.add(e(),"acronym","fas fa-question-circle","xypp-more-bbcode.forum.sign.acronym",z('[acronym title="'+D("title")+'"] '+D("describe")))}))}(t,e),function(t,e){t.group(e(),"container","fas fa-square","xypp-more-bbcode.forum.container.title",(function(t){var e=y(100,100);t.add(e(),"table","fas fa-table","xypp-more-bbcode.forum.container.table",j(H("\n[TABLE]\n    [THEAD]\n        [TH]"+D("column")+"[TH]\n        [TH]"+D("column")+"[TH]\n        [TH]"+D("any")+"[TH]\n    [/THEAD]\n    [TBODY]\n        [TR]\n            [TD]"+D("text")+"[TD]\n            [TD]"+D("text")+"[TD]\n            [TD]"+D("any")+"[TD]\n        [/TR]\n    [/TBODY]\n[/TABLE]\n"),H("\n| "+D("column")+" | "+D("column")+" | "+D("column")+" | "+D("column")+" |\n|---|---|---|---|\n| "+D("any")+" | "+D("any")+" | "+D("any")+" | "+D("any")+" |\n"))),t.add(e(),"quote","fas fa-quote-right","xypp-more-bbcode.forum.container.quote",j(z("[quote]"),P(H(">"),{multiline:!0,surroundWithNewlines:!0}))),t.add(e(),"details","fas fa-info-circle","xypp-more-bbcode.forum.container.details",P(z('[details="TITLE"] CONTENT '),{blockPrefix:"[/details]"})),t.add(e(),"tabs","fas fa-columns","xypp-more-bbcode.forum.container.tabs",H('\n[tabs]\n[tab="'+D("column")+'"]'+D("text")+'[/tab]\n[tab="'+D("any")+'"]'+D("text")+"[/tab]\n[/tabs]\n")),t.add(e(),"alert","fas fa-exclamation-triangle","xypp-more-bbcode.forum.container.alert",Z),t.space(e()),t.add(e(),"iframe","fas fa-window-maximize","xypp-more-bbcode.forum.container.iframe",C('<iframe width="100%"  height="370px" title="Iframe Example" src="'+D("url")+'">',"</iframe>")),t.add(e(),"progress","fas fa-percentage","xypp-more-bbcode.forum.container.progress",z("[pbar]"+D("title")+",51%,"+D("simple")+",black,red,pink,1,70,5,40"))})),(0,n.extend)(G().prototype,["oncreate","onupdate"],Q),(0,n.extend)(U().prototype,"oncreate",(function(){(0,n.extend)(this.attrs,"surround",Q.bind(this))}))}(t,e),function(t,e){t.group(e(),"embed","fas fa-sitemap","xypp-more-bbcode.forum.embed.title",(function(t){var e=y(100,100);t.add(e(),"cloud","fas fa-cloud","xypp-more-bbcode.forum.embed.cloud",ot),t.add(e(),"down","fas fa-download","xypp-more-bbcode.forum.embed.down",H('[down link="'+D("url")+'" size="'+D("size")+'" name="'+D("file")+'"]')),t.add(e(),"audio","fas fa-file-audio","xypp-more-bbcode.forum.embed.audio",H('[audio mp3="'+D("url")+'"]')),t.add(e(),"clip","fas fa-file-video","xypp-more-bbcode.forum.embed.clip",H('[clip mp4="'+D("url")+'"]'))}))}(t,e),function(t,e){t.group(e(),"xx2see","fas fa-eye","xypp-more-bbcode.forum.xx2see.title",(function(t){var e=y(100,100);t.add(e(),"login2see","fas fa-user","xypp-more-bbcode.forum.xx2see.login.title",z("[login]")),t.add(e(),"reply2see","fas fa-reply","xypp-more-bbcode.forum.xx2see.reply.title",z("[reply]")),t.add(e(),"like2see","fas fa-heart","xypp-more-bbcode.forum.xx2see.like.title",z("[like]"))})),(0,n.extend)(G().prototype,"content",(function(){x().session.user&&x().current.matches(rt())?$(".reply2see_reply").off("click").on("click",(function(){return it().replyAction.call(x().current.get("discussion"),!0,!1)})):($(".reply2see_reply").off("click").on("click",(function(){return x().modal.show(st())})),$(".login2see_login").off("click").on("click",(function(){return x().modal.show(st())})))}))}(t,e);var r,i=!1,c=!1;(0,n.extend)(B.prototype,"clickEvent",(function(t,e){"group"!==e.type&&_(O("auto-close")||"phone")&&(c=!1,m.redraw())})),(0,n.extend)(a().prototype,"toolbarItems",(function(e){var n,r,a=S(),s=_(O("remove-markdown")),l=O("collect-markdown");a||"none"!=l&&s?i||(t.group(0,"collect","fas fa-box-open","xypp-more-bbcode.forum.collect",(function(){})),i=!0):i&&(t.remove("collect"),i=!1);var u=0;if(a){var p=t.item("collect");p.tags.clear(),Object.keys(e.toObject()).forEach((function(t){if("markdown"!==t){var o=e.getPriority(t),n=e.get(t);e.remove(t),p.tags.collect(0-o,t,n),u=Math.min(u,0-o)}}))}s&&e.has("markdown")&&(t.item("collect").tags.remove("markdown"),"first"===l?t.item("collect").tags.collect(u-1,"markdown",e.get("markdown")):"sub"===l&&t.item("collect").tags.group(u-1,"markdown","fab fa-markdown","xypp-more-bbcode.forum.markdown",(function(t){t.collect(0,"markdown",e.get("markdown"))})),e.remove("markdown")),e.add("xypp-more-bbcode",X().component({className:"bbcode-more-btn Button Button--icon Button--link",position:"bottom",onclick:function(t){t.currentTarget.blur(),c=!c,m.redraw()},icon:b(c,"fa fa-minus","fa fa-plus")},o().translator.trans("xypp-more-bbcode.forum.name"))),c&&null!=(n=this.attrs)&&null!=(r=n.composer)&&r.editor&&e.add("xypp-more-bbcode-buttons",B.component({tagCollect:t,className:"main-entry",editor:this.attrs.composer.editor,bottom:57}),-5e4)})),(0,n.extend)(a().prototype,["onupdate","oncreate"],(function(){c&&N(this.$(".bbcode-more-btn"),this.$(".main-entry"))})),r={"auto-close":["all","tablet","phone","none"],"pref-markdown":["all","collected","none"],"collect-all":["all","tablet","phone","none"],"remove-markdown":["all","tablet","phone","none"],"collect-markdown":["first","sub","none"]},(0,n.extend)(mt().prototype,"settingsItems",(function(t){t.add("xypp-more-bbcode",[m("h2",null,ft("name")),Object.keys(r).map((function(t){var e={};r[t].forEach((function(o){e[o]=ft(t+"."+o)}));var n=O(t)||r[t][0],a=o().forum.attribute("xypp-more-bbcode-"+t);return m(ut(),{label:ft(t+".title"),className:g()("Settings","Settings-"+t)},m("small",{className:"setting-default-value"},b(!!a,ft("preference-default",{default:ft(t+"."+a)}))),m(L(),{options:e,value:n,onchange:function(e){var n={};n["xypp-more-bbcode-"+t]=e,o().session.user.savePreferences(n)}}))}))])}))}),-5e4)})(),module.exports={}})();
//# sourceMappingURL=forum.js.map