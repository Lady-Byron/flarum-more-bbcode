{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@litalino/flarum-more-bbcode/webpack/bootstrap","webpack://@litalino/flarum-more-bbcode/webpack/runtime/compat get default export","webpack://@litalino/flarum-more-bbcode/webpack/runtime/define property getters","webpack://@litalino/flarum-more-bbcode/webpack/runtime/hasOwnProperty shorthand","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/app']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/extend']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@litalino/flarum-more-bbcode/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@litalino/flarum-more-bbcode/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/Component']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Button']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/utils/nodeUtil.ts","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/styleSelectedText']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/utils/hAlign.ts","webpack://@litalino/flarum-more-bbcode/./src/forum/components/buttonBar.tsx","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/app']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/helper/tagCollector.ts","webpack://@litalino/flarum-more-bbcode/./src/forum/utils/commonReplace.ts","webpack://@litalino/flarum-more-bbcode/./src/forum/utils/styleUtil.ts","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Select']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/components/alertPreviewModal.tsx","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/ComposerPostPreview']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/tags/utilities.tsx","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/components/cloudPreviewModal.tsx","webpack://@litalino/flarum-more-bbcode/./src/forum/tags/embed.tsx","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/settings.tsx","webpack://@litalino/flarum-more-bbcode/./src/forum/index.ts","webpack://@litalino/flarum-more-bbcode/./src/forum/tags/typography.tsx","webpack://@litalino/flarum-more-bbcode/./src/forum/tags/xx2see.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","export function showIf(judgement: boolean, vnode: any, def?: any) {\r\n    return judgement ? vnode : (def || \"\");\r\n}\r\nexport function prioritySerial(startValue: number, step: number): () => number {\r\n    let value = startValue;\r\n    return () => {\r\n        const ret = value;\r\n        value += step;\r\n        return ret;\r\n    };\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/styleSelectedText'];","export default function align(base: JQuery, elem: JQuery) {\r\n    const parentOffset = base.offsetParent()?.offset()?.left || 0;\r\n    const realLeft = base.offset()?.left || 0;\r\n    const screenWid = $(document.body).width() || 0;\r\n    let targetWidth = elem.width() || 0;\r\n    let globalOffset = realLeft;\r\n\r\n    if (globalOffset + targetWidth > screenWid) {\r\n        globalOffset = screenWid - targetWidth;\r\n    }\r\n    if (globalOffset < 0) globalOffset = 0;\r\n\r\n    elem.css({\r\n        left: globalOffset - parentOffset\r\n    });\r\n}","import Component from \"flarum/common/Component\";\r\nimport Button from \"flarum/common/components/Button\";\r\nimport Tooltip from \"flarum/common/components/Tooltip\";\r\nimport TagCollector, { TagButton, TagButtonGroup, Tags, TagSpace } from \"../helper/tagCollector\";\r\nimport { showIf } from \"../utils/nodeUtil\";\r\nimport classList from \"flarum/common/utils/classList\"\r\nimport styleSelectedText from \"flarum/common/utils/styleSelectedText\";\r\nimport align from \"../utils/hAlign\";\r\nimport Mithril from \"mithril\";\r\n\r\n// A Magic number that we use to calculate the height of sub buttons\r\nconst heightPreRow = 36;\r\n\r\nexport default class buttonBar extends Component<{\r\n    tagCollect: TagCollector,\r\n    textEditor: HTMLTextAreaElement,\r\n    rows?: number,\r\n    className?: string,\r\n    bottom?: number\r\n}> {\r\n    selectedSub: string = \"\";\r\n    view(vnode: any) {\r\n        const rows = this.attrs.rows || 1;\r\n        const tags = this.attrs.tagCollect.get();\r\n        const groups = tags.filter(tag => tag.type === \"group\");\r\n        const offset = (this.attrs.bottom || 0) + 3;\r\n        return <div\r\n            className={classList(\"ButtonBar\", this.attrs.className)}\r\n            style={`bottom:${offset}px;`}>\r\n            {this.getTags(tags, rows)}\r\n            {groups.map(group => buttonBar.component({\r\n                textEditor: this.attrs.textEditor,\r\n                tagCollect: group.tags,\r\n                className: \"SubButtons\" + showIf(this.selectedSub === group.name, \" show\", \"\"),\r\n                rows: group.rows,\r\n                bottom: rows * heightPreRow\r\n            }))}\r\n        </div>;\r\n    }\r\n    onupdate(vnode: any): void {\r\n        super.onupdate(vnode);\r\n        if (this.selectedSub) {\r\n            const base = $(this.element).find(\".Button.selected\");\r\n            const elem = $(this.element).children(\".show\");\r\n            align(base, elem);\r\n        }\r\n    }\r\n    getTags(tags: (Tags)[], rows: number) {\r\n        const ret: (Mithril.ClassComponent | JSX.Element)[][] = [[]];\r\n        const preRow = Math.floor((tags.length + rows - 1) / rows);\r\n        let currentRow = 0;\r\n        for (let i = 0; i < tags.length; i++) {\r\n            ret[currentRow].push(this.getTagComponent(tags[i]));\r\n            if ((i + 1) % preRow === 0) {\r\n                currentRow++;\r\n                ret.push([]);\r\n            }\r\n        }\r\n        return ret.map(row => <div class=\"ButtonBar-row\">{row}</div>);\r\n    }\r\n    getTagComponent(tag: Tags) {\r\n        if (tag.type === \"space\")\r\n            return <div class=\"ButtonBar-space\"></div>;\r\n        if (tag.type === \"collect\")\r\n            return tag.component;\r\n\r\n        let clsName = \"Button Button--link\";\r\n        if (tag.type === \"group\") clsName += \" GroupBtn\";\r\n        if (typeof tag.icon === \"string\") clsName += \" Button--icon\";\r\n        if (tag.name === this.selectedSub) clsName += \" selected\";\r\n\r\n\r\n        if (!tag.icon) {\r\n            return <Button className={clsName}\r\n                onclick={this.clickEventWarper(tag)}>\r\n                {tag.tooltip}\r\n            </Button>\r\n        } else if (typeof tag.icon === \"string\") {\r\n            return <Tooltip text={tag.tooltip} position=\"bottom\">\r\n                <Button className={clsName}\r\n                    icon={tag.icon}\r\n                    onclick={this.clickEventWarper(tag)}></Button>\r\n            </Tooltip>;\r\n        } else if (typeof tag.icon === \"function\") {\r\n            return <Tooltip text={tag.tooltip} position=\"bottom\">\r\n                <Button className={clsName} onclick={this.clickEventWarper(tag)}>\r\n                    {tag.icon()}\r\n                </Button>\r\n            </Tooltip>;\r\n        } else {\r\n            return <Tooltip text={tag.tooltip} position=\"bottom\">\r\n                <Button className={clsName} onclick={this.clickEventWarper(tag)}>\r\n                    {tag.icon.component.component(tag.icon.attrs)}\r\n                </Button>\r\n            </Tooltip>;\r\n        }\r\n    }\r\n    clickEventWarper(tag: Tags) {\r\n        return ((event: MouseEvent) => {\r\n            (event.currentTarget as HTMLElement).blur();\r\n            this.clickEvent(tag)\r\n        }).bind(this);\r\n    }\r\n    clickEvent(tag: Tags) {\r\n        if (tag.type === \"group\") {\r\n            this.selectedSub = tag.name;\r\n            m.redraw();\r\n        } else if (tag.type === \"button\") {\r\n            if (typeof tag.style !== \"function\")\r\n                styleSelectedText(this.attrs.textEditor, tag.style as any)\r\n            else {\r\n                const data = tag.style();\r\n                if (data instanceof Promise) {\r\n                    data.then(style => style && styleSelectedText(this.attrs.textEditor, style as any));\r\n                } else {\r\n                    data && styleSelectedText(this.attrs.textEditor, data as any);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import { NestedStringArray } from \"@askvortsov/rich-icu-message-formatter\";\r\nimport app from \"flarum/forum/app\";\r\nimport ItemList from \"flarum/common/utils/ItemList\";\r\nimport Component from \"flarum/common/Component\";\r\nimport Mithril from \"mithril\";\r\n\r\nexport interface StyleArgs {\r\n    prefix: string;\r\n    suffix: string;\r\n    blockPrefix: string;\r\n    blockSuffix: string;\r\n    multiline: boolean;\r\n    replaceNext: string;\r\n    prefixSpace: boolean;\r\n    scanFor: string;\r\n    surroundWithNewlines: boolean;\r\n    orderedList: boolean;\r\n    unorderedList: boolean;\r\n    trimFirst: boolean;\r\n}\r\nexport type TooltipKeyType = string | {\r\n    key: string,\r\n    params: any\r\n};\r\nexport type IconType = string | false | {\r\n    component: any,\r\n    attrs: any\r\n} | (() => Mithril.ClassComponent | JSX.Element);\r\nexport type StyleType = Partial<StyleArgs> | (() => Partial<StyleArgs>) | (() => Promise<Partial<StyleArgs>>) | (() => void);\r\n\r\n//Tags\r\nexport type TagButton = {\r\n    type: \"button\",\r\n    icon: IconType,\r\n    tooltip: NestedStringArray,\r\n    name: string,\r\n    style: StyleType\r\n}\r\nexport type TagCollected = {\r\n    type: \"collect\",\r\n    name: string,\r\n    component: Mithril.ClassComponent | JSX.Element\r\n}\r\nexport type TagButtonGroup = {\r\n    type: \"group\",\r\n    icon: IconType,\r\n    tooltip: NestedStringArray,\r\n    tags: TagCollector,\r\n    name: string,\r\n    rows: number\r\n}\r\nexport type TagSpace = {\r\n    type: \"space\"\r\n}\r\nexport type Tags = TagButton | TagButtonGroup | TagSpace | TagCollected;\r\nexport default class TagCollector {\r\n    public tags: ItemList<(Tags)> = new ItemList();\r\n    spaceKey = 0;\r\n    private getTranslation(key: TooltipKeyType) {\r\n        return typeof key === \"string\" ? app.translator.trans(key) : app.translator.trans(key.key, key.params);\r\n    }\r\n    public add(priority: number, name: string, icon: IconType, tooltipKey: TooltipKeyType, style: StyleType) {\r\n        this.tags.add(name, {\r\n            type: \"button\",\r\n            name,\r\n            icon,\r\n            tooltip: this.getTranslation(tooltipKey),\r\n            style\r\n        }, priority);\r\n        return this;\r\n    }\r\n    public collect(priority: number, name: string, component: Mithril.ClassComponent | JSX.Element) {\r\n        this.tags.add(name, {\r\n            type: \"collect\",\r\n            name,\r\n            component\r\n        }, priority);\r\n    }\r\n    public space(priority: number) {\r\n        this.tags.add(\"space-\" + (this.spaceKey++), {\r\n            type: \"space\"\r\n        }, priority);\r\n        return this;\r\n    }\r\n    public group(priority: number, name: string, icon: IconType, tooltipKey: TooltipKeyType, callback: (tags: TagCollector) => void, rows: number = 1) {\r\n        const newGroup = new TagCollector();\r\n        callback(newGroup);\r\n        this.tags.add(name, {\r\n            type: \"group\",\r\n            name,\r\n            icon: icon,\r\n            tooltip: this.getTranslation(tooltipKey),\r\n            tags: newGroup,\r\n            rows\r\n        }, priority);\r\n        return newGroup;\r\n    }\r\n\r\n    public item(key: string): Tags {\r\n        return this.tags.get(key);\r\n    }\r\n    public clear() {\r\n        Object.keys(this.tags.toObject()).forEach(k => this.tags.remove(k));\r\n    }\r\n    public remove(key: string) {\r\n        this.tags.remove(key);\r\n    }\r\n    public get() {\r\n        const arr = this.tags.toArray();\r\n        const disabled: Record<string, boolean> = app.forum.attribute(\"bbcode-disable\");\r\n        return arr.filter(item => !disabled[item.itemName]).reverse();\r\n    }\r\n}","import app from \"flarum/forum/app\";\r\nexport type COMMON_KEY = \"describe\" | \"title\" | \"text\" | \"Put\" | \"url\" | \"size\" | \"file\" | \"any\" | \"column\" | \"simple\";\r\nexport default function common(key: COMMON_KEY): string {\r\n    return app.translator.trans(\"xypp-more-bbcode.forum.common.\" + key) + \"\"\r\n}","import { StyleArgs } from \"../helper/tagCollector\";\r\n\r\nexport function merge(...args: Partial<StyleArgs>[]){\r\n    return Object.assign({}, ...args);\r\n}\r\nexport function pair(p: string, s?: string, trim: boolean = true): Partial<StyleArgs> {\r\n    if (!s) s = p;\r\n    return { prefix: p, suffix: s, trimFirst: trim };\r\n}\r\nexport function prefix(p: string, trim: boolean = true): Partial<StyleArgs> {\r\n    return { prefix: p, trimFirst: trim };\r\n}\r\n\r\nexport function bbcode(code: string, trim: boolean = false) {\r\n    const regex = /\\[([a-zA-Z0-9_-]+)/.exec(code);\r\n    if (!regex) {\r\n        return {}\r\n    }\r\n    const end = regex[1];\r\n    return pair(code, `[/${end}]`, trim);\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import Modal, { IInternalModalAttrs } from \"flarum/common/components/Modal\";\r\nimport app from \"flarum/forum/app\";\r\nimport { StyleArgs } from \"../helper/tagCollector\";\r\nimport Select from \"flarum/common/components/Select\"\r\nimport { bbcode } from \"../utils/styleUtil\";\r\nimport Button from \"flarum/common/components/Button\";\r\nfunction _trans(key: string, params?: any): string {\r\n    const dat = app.translator.trans(\"xypp-more-bbcode.forum.alert.\" + key, params);\r\n    if (Array.isArray(dat)) return dat.join(\"\");\r\n    return dat;\r\n}\r\nexport default class alertPreviewModal extends Modal<{\r\n    onsubmit: (style: Partial<StyleArgs>) => void;\r\n    oncancel: () => void;\r\n} & IInternalModalAttrs> {\r\n    done: boolean = false;\r\n    typesOpt: Record<string, string> = {};\r\n    availableMap: Record<string, string[]> = {\r\n        \"success\": [\"a\", \"b\", \"c\", \"d\"],\r\n        \"warning\": [\"a\", \"b\", \"c\", \"d\"],\r\n        \"error\": [\"a\", \"b\", \"c\", \"d\"],\r\n        \"notice\": [\"a\", \"b\", \"c\", \"d\"],\r\n        \"basic\": [\"a\"],\r\n        \"custom\": [\"a\", \"b\"],\r\n    };\r\n    colorMap: Record<string, string[]> = {\r\n        \"success\": [\"green\", \"white\", \"green\"],\r\n        \"error\": [\"red\", \"white\", \"red\"],\r\n        \"notice\": [\"teal\", \"white\", \"teal\"],\r\n        \"warning\": [\"darkorange\", \"white\", \"darkorange\"],\r\n        \"custom\": [\"red\", \"white\", \"red\"],\r\n    };\r\n    available: string[] = [\"a\", \"b\", \"c\", \"d\"];\r\n    type: string = \"notice\";\r\n    style: string = \"a\";\r\n    public oninit(vnode: any) {\r\n        super.oninit(vnode);\r\n        this.typesOpt = {\r\n            \"success\": _trans(\"type.success\") + \"\",\r\n            \"warning\": _trans(\"type.warning\") + \"\",\r\n            \"error\": _trans(\"type.error\") + \"\",\r\n            \"notice\": _trans(\"type.notice\") + \"\",\r\n            \"basic\": _trans(\"type.basic\") + \"\",\r\n            \"custom\": _trans(\"type.custom\") + \"\",\r\n        };\r\n    }\r\n    public className() {\r\n        return \"alertPreviewModal Modal--small\";\r\n    }\r\n    public title() {\r\n        return _trans(\"title\");\r\n    }\r\n    content() {\r\n        const availableDict: Record<string, string> = {};\r\n        this.available.forEach(v => {\r\n            availableDict[v] = v;\r\n        });\r\n        return <div className=\"Modal-body\">\r\n            <div className=\"Form-group\">\r\n                <label for=\"xypp-more-bbcode-alert-type\">\r\n                    {_trans(\"type.label\")}\r\n                </label>\r\n                <Select options={this.typesOpt} value={this.type} onchange={((e: string) => {\r\n                    this.type = e;\r\n                    this.available = this.availableMap[e];\r\n                }).bind(this)}></Select>\r\n            </div>\r\n            <div className=\"Form-group\">\r\n                <label for=\"xypp-more-bbcode-alert-type\">\r\n                    {_trans(\"style\")}\r\n                </label>\r\n                <Select options={availableDict} value={this.style} onchange={((e: string) => {\r\n                    this.style = e;\r\n                }).bind(this)}></Select>\r\n            </div>\r\n            <div className=\"bbcode-alert-preview\">\r\n\r\n            </div>\r\n            <Button className=\"Button Button--primary\" type=\"submit\">{_trans(\"insert\")}</Button>\r\n        </div>;\r\n    }\r\n    generateStyle(): Partial<StyleArgs> {\r\n        const style = this.style;\r\n        const type = this.type;\r\n        if (this.type === \"custom\") {\r\n            if (this.style === \"a\") {\r\n                return bbcode(\r\n                    `[acustom]${this.colorMap.custom.join(\",\")},${_trans(\"defaults.content\", { type, style })}`\r\n                );\r\n            } else if (this.style === \"b\") {\r\n                return bbcode(\r\n                    `[bcustom]title=${_trans(\"defaults.content\", { type, style })} font=${this.colorMap.custom[0]} bg=${this.colorMap.custom[1]} border=${this.colorMap.custom[2]}`\r\n                )\r\n            } else return {};\r\n        }\r\n        switch (this.style) {\r\n            case \"a\": return bbcode(\r\n                `[a${this.type}]${_trans(\"defaults.content\", { type, style })}`\r\n            );\r\n            case \"b\": return bbcode(\r\n                `[b${this.type}]${_trans(\"defaults.content\", { type, style })}`\r\n            );\r\n            case \"c\": return bbcode(\r\n                `[c${this.type}]${this.colorMap[type].join(\",\")},${_trans(\"defaults.title\")},${_trans(\"defaults.content\", { type, style })}`\r\n            );\r\n            case \"d\": return bbcode(\r\n                `[d${this.type} title=${_trans(\"defaults.title\")} font=${this.colorMap.custom[0]} bg=${this.colorMap.custom[1]} border=${this.colorMap.custom[2]}]${_trans(\"defaults.content\", { type, style })}`\r\n            );\r\n            default:\r\n                return {};\r\n        }\r\n    }\r\n    generateBBCode(): string {\r\n        const style = this.generateStyle();\r\n        return (style.prefix + \"\") + (style.suffix || \"\");\r\n    }\r\n    onupdate(vnode: any): void {\r\n        super.onupdate(vnode);\r\n        //@ts-ignore\r\n        s9e.TextFormatter.preview(\r\n            this.generateBBCode(),\r\n            this.$(\".bbcode-alert-preview\")[0]\r\n        );\r\n    }\r\n    onsubmit(e: SubmitEvent): void {\r\n        e.preventDefault();\r\n        this.done = true;\r\n        this.attrs.onsubmit(this.generateStyle());\r\n        app.modal.close();\r\n    }\r\n    onbeforeremove(vnode: any): Promise<void> | void {\r\n        if (this.done) return;\r\n        this.attrs.oncancel();\r\n    }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ComposerPostPreview'];","import app from \"flarum/forum/app\";\r\nimport alertPreviewModal from \"../components/alertPreviewModal\";\r\nimport TagCollector, { StyleArgs } from \"../helper/tagCollector\";\r\nimport { prioritySerial } from \"../utils/nodeUtil\";\r\nimport { bbcode, merge, pair, prefix } from \"../utils/styleUtil\";\r\nimport CommentPost from \"flarum/forum/components/CommentPost\";\r\nimport ComposerPostPreview from \"flarum/forum/components/ComposerPostPreview\";\r\nimport { extend } from \"flarum/common/extend\";\r\nimport common from \"../utils/commonReplace\";\r\nexport default function addUtilitiesTags(tags: TagCollector, priority: () => number) {\r\n    //Containers\r\n    tags.group(priority(), \"container\",\r\n        \"fas fa-square\",\r\n        \"xypp-more-bbcode.forum.container.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Table\r\n            tags.add(priority(), \"table\",\r\n                \"fas fa-table\",\r\n                \"xypp-more-bbcode.forum.container.table\",\r\n                prefix(\"\\n| Column 1 | Column 2 | Column 3 | Column 4 |\\n|---|---|---|---|\\n| row 1 | row 2 | row 3 | row 4 |\\n\"));\r\n            //Quote\r\n            tags.add(priority(), \"quote\",\r\n                \"fas fa-quote-right\",\r\n                \"xypp-more-bbcode.forum.container.quote\",\r\n                merge(prefix(\">\"), {\r\n                    multiline: true,\r\n                    surroundWithNewlines: true\r\n                }));\r\n            //Details\r\n            tags.add(priority(), \"details\",\r\n                \"fas fa-info-circle\",\r\n                \"xypp-more-bbcode.forum.container.details\",\r\n                merge(bbcode(\"[details=\\\"TITLE\\\"] CONTENT \"), {\r\n                    blockPrefix: '[/details]'\r\n                }));\r\n            //Tabs\r\n            tags.add(priority(), \"tabs\",\r\n                \"fas fa-columns\",\r\n                \"xypp-more-bbcode.forum.container.tabs\",\r\n                prefix(`\r\n[tabs]\r\n[tab=\\\"${common(\"column\")}\\\"]${common(\"text\")}[/tab]\r\n[tab=\\\"${common(\"any\")}\\\"]${common(\"text\")}[/tab]\r\n[/tabs]\r\n`));\r\n            //Alert\r\n            tags.add(priority(), \"alert\",\r\n                \"fas fa-exclamation-triangle\",\r\n                \"xypp-more-bbcode.forum.container.alert\",\r\n                makeAlert\r\n            );\r\n\r\n            tags.space(priority());\r\n\r\n            //IFrame\r\n            tags.add(priority(), \"iframe\",\r\n                \"fas fa-window-maximize\",\r\n                \"xypp-more-bbcode.forum.container.iframe\",\r\n                pair('<iframe width=\"100%\"  height=\"370px\" title=\"Iframe Example\" src=\"' + common(\"url\") + '\">', '</iframe>')\r\n            )\r\n        }\r\n    );\r\n\r\n    //Widgets\r\n    tags.group(priority(), \"widgets\",\r\n        \"fas fa-bars\",\r\n        \"xypp-more-bbcode.forum.widgets.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Alert\r\n            tags.add(priority(), \"alert\",\r\n                \"fas fa-exclamation-triangle\",\r\n                \"xypp-more-bbcode.forum.widgets.alert\",\r\n                makeAlert\r\n            );\r\n            //Progress\r\n            tags.add(priority(), \"progress\",\r\n                \"fas fa-percentage\",\r\n                \"xypp-more-bbcode.forum.widgets.progress\",\r\n                bbcode(`[pbar]${common(\"title\")},51%,${common(\"simple\")},black,red,pink,1,70,5,40`)\r\n            );\r\n        }\r\n    );\r\n\r\n    // RegTab\r\n    extend(CommentPost.prototype, [\"oncreate\", \"onupdate\"], createTab);\r\n    extend(ComposerPostPreview.prototype, \"oncreate\", function (this: ComposerPostPreview) {\r\n        extend(this.attrs as any, \"surround\", createTab.bind(this));\r\n    });\r\n}\r\nfunction makeAlert() {\r\n    return new Promise<Partial<StyleArgs>>((resolve, reject) => {\r\n        app.modal.show(alertPreviewModal, {\r\n            onsubmit: resolve,\r\n            oncancel: reject\r\n        });\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * Tab Id Assigner\r\n * Copy from Litalino/flarum-more-bbcode\r\n */\r\n\r\nlet tabId = 0;\r\nfunction createTab(this: CommentPost | ComposerPostPreview) {\r\n    const containers = this.$(\".tabs\");\r\n    containers.each((i, container) => {\r\n        const $container = $(container);\r\n\r\n        if ($container.find('input[type=\"radio\"][name]').length) return;\r\n        const $inputs = $container.find('> .tab > input[type=\"radio\"]');\r\n\r\n        if (!$inputs.length) return;\r\n\r\n        const $items = $container.find(\".tab\");\r\n        const num = tabId++;\r\n\r\n        $inputs.attr(\"name\", `tab-group-${num}`);\r\n\r\n        if (!$inputs.is(\"[checked]\"))\r\n            $inputs[0].setAttribute(\"checked\", \"checked\");\r\n\r\n        $items.each((i, item) => {\r\n            const $item = $(item);\r\n            const id = `tab-${num}-${++i}`;\r\n\r\n            $item.find('input[type=\"radio\"]').attr(\"id\", id);\r\n            $item.find(\"label\").attr(\"for\", id);\r\n        });\r\n    });\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditorButton'];","import Modal, { IInternalModalAttrs } from \"flarum/common/components/Modal\";\r\nimport app from \"flarum/forum/app\";\r\nimport { StyleArgs } from \"../helper/tagCollector\";\r\nimport Select from \"flarum/common/components/Select\"\r\nimport { bbcode } from \"../utils/styleUtil\";\r\nimport Button from \"flarum/common/components/Button\";\r\nimport common from \"../utils/commonReplace\";\r\nfunction _trans(key: string, params?: any): string {\r\n    const dat = app.translator.trans(\"xypp-more-bbcode.forum.cloud.\" + key, params);\r\n    if (Array.isArray(dat)) return dat.join(\"\");\r\n    return dat;\r\n}\r\nexport default class cloudPreviewModal extends Modal<{\r\n    onsubmit: (style: Partial<StyleArgs>) => void;\r\n    oncancel: () => void;\r\n} & IInternalModalAttrs> {\r\n    done: boolean = false;\r\n    opts: Record<string, string> = {};\r\n    type: string = \"other\";\r\n    public oninit(vnode: any) {\r\n        super.oninit(vnode);\r\n        this.opts = app.forum.attribute(\"bbcode-cloud\");\r\n    }\r\n    public className() {\r\n        return \"alertPreviewModal Modal--small\";\r\n    }\r\n    public title() {\r\n        return _trans(\"title\");\r\n    }\r\n    content() {\r\n        return <div className=\"Modal-body\">\r\n            <div className=\"Form-group\">\r\n                <label for=\"xypp-more-bbcode-cloud-type\">\r\n                    {_trans(\"type.label\")}\r\n                </label>\r\n                <Select options={this.opts} value={this.type} onchange={((e: string) => {\r\n                    this.type = e;\r\n                }).bind(this)}></Select>\r\n            </div>\r\n            <div className=\"bbcode-cloud-preview\">\r\n\r\n            </div>\r\n            <Button className=\"Button Button--primary\" type=\"submit\">{_trans(\"insert\")}</Button>\r\n        </div>;\r\n    }\r\n    generateStyle(): Partial<StyleArgs> {\r\n        return bbcode(`[cloud type=\"${this.type}\" title=\"${common(\"title\")}\" url=\"${common(\"url\")}\"]${_trans(\"content.defaults\")}`);\r\n    }\r\n    generateBBCode(): string {\r\n        const style = this.generateStyle();\r\n        return (style.prefix + \"\") + (style.suffix || \"\");\r\n    }\r\n    onupdate(vnode: any): void {\r\n        super.onupdate(vnode);\r\n        //@ts-ignore\r\n        s9e.TextFormatter.preview(\r\n            this.generateBBCode(),\r\n            this.$(\".bbcode-cloud-preview\")[0]\r\n        );\r\n    }\r\n    onsubmit(e: SubmitEvent): void {\r\n        e.preventDefault();\r\n        this.done = true;\r\n        this.attrs.onsubmit(this.generateStyle());\r\n        app.modal.close();\r\n    }\r\n    onbeforeremove(vnode: any): Promise<void> | void {\r\n        if (this.done) return;\r\n        this.attrs.oncancel();\r\n    }\r\n}","import app from \"flarum/forum/app\";\r\nimport TagCollector, { StyleArgs } from \"../helper/tagCollector\";\r\nimport { prioritySerial } from \"../utils/nodeUtil\";\r\nimport cloudPreviewModal from \"../components/cloudPreviewModal\";\r\nimport { bbcode } from \"../utils/styleUtil\";\r\nimport common from \"../utils/commonReplace\";\r\n\r\nexport default function addEmbedTags(tags: TagCollector, priority: () => number) {\r\n    tags.group(priority(), \"embed\",\r\n        \"fas fa-sitemap\",\r\n        \"xypp-more-bbcode.forum.embed.title\",\r\n        (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Cloud\r\n            tags.add(priority(), \"cloud\",\r\n                \"fas fa-cloud\",\r\n                \"xypp-more-bbcode.forum.embed.cloud\",\r\n                makeCloud\r\n            );\r\n            //Down\r\n            tags.add(priority(), \"down\",\r\n                \"fas fa-download\",\r\n                \"xypp-more-bbcode.forum.embed.down\",\r\n                bbcode(`[down link=\"${common(\"url\")}\" size=\"${common(\"size\")}\" name=\"${common(\"file\")}\"]`)\r\n            );\r\n            //Audio\r\n            tags.add(priority(), \"audio\",\r\n                \"fas fa-file-audio\",\r\n                \"xypp-more-bbcode.forum.embed.audio\",\r\n                bbcode(`[audio mp3=\"${common(\"url\")}\"]`)\r\n            );\r\n            //Clip\r\n            tags.add(priority(), \"clip\",\r\n                \"fas fa-file-video\",\r\n                \"xypp-more-bbcode.forum.embed.clip\",\r\n                bbcode(`[clip mp4=\"${common(\"url\")}\"]`)\r\n            );\r\n\r\n\r\n        }\r\n    );\r\n\r\n}\r\nfunction makeCloud() {\r\n    return new Promise<Partial<StyleArgs>>((resolve, reject) => {\r\n        app.modal.show(cloudPreviewModal, {\r\n            onsubmit: resolve,\r\n            oncancel: reject\r\n        });\r\n    })\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","import app from 'flarum/common/app';\r\nimport Select from 'flarum/common/components/Select';\r\nimport FieldSet from \"flarum/common/components/FieldSet\"\r\nimport { extend } from \"flarum/common/extend\";\r\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\r\n\r\nfunction _trans(key: string, params?: any): string {\r\n    const dat = app.translator.trans(\"xypp-more-bbcode.forum.\" + key, params);\r\n    if (Array.isArray(dat)) return dat.join(\"\");\r\n    return dat;\r\n}\r\nexport default function regSetting() {\r\n    const SELECT_AC = {\r\n        \"all\": _trans(\"auto-close.all\"),\r\n        \"tablet\": _trans(\"auto-close.tablet\"),\r\n        \"phone\": _trans(\"auto-close.phone\"),\r\n        \"none\": _trans(\"auto-close.none\")\r\n    }\r\n    extend(SettingsPage.prototype, 'settingsItems', function (items) {\r\n        const close = (app.session?.user?.preferences() || {})[\"xypp-bbcode-more-auto-close\"] || \"phone\";\r\n        items.add(\r\n            'xypp-bbcode-more-auto-close',\r\n            <FieldSet label={_trans(\"auto-close.title\")} className=\"Settings auto-close\">\r\n                <Select\r\n                    options={SELECT_AC}\r\n                    value={close}\r\n                    onchange={(value: string) => {\r\n                        app.session.user!\r\n                            .savePreferences({\r\n                                \"xypp-bbcode-more-auto-close\": value\r\n                            });\r\n                    }}\r\n                />\r\n            </FieldSet>\r\n        );\r\n    })\r\n}","/*\n * This file is part of Xypp/more-bbcode.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/common/app';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from \"flarum/common/components/TextEditor\";\nimport buttonBar from './components/buttonBar';\nimport TagCollector, { TagButtonGroup, Tags } from './helper/tagCollector';\nimport addTypographyButtons from './tags/typography';\nimport addUtilitiesTags from './tags/utilities';\nimport TextEditorButton from \"flarum/common/components/TextEditorButton\";\nimport { prioritySerial, showIf } from './utils/nodeUtil';\nimport addEmbedTags from './tags/embed';\nimport { addXX2SeeTags } from './tags/xx2see';\nimport align from './utils/hAlign';\nimport regSetting from './settings';\nfunction checkDevice(target: \"none\" | \"all\" | \"phone\" | \"tablet\"): boolean {\n  if (target == \"none\") return false;\n  if (target == \"all\") return true;\n  const current = app.screen();\n  if (target === 'phone' && current === \"phone\") return true;\n  if (target === \"tablet\" && (current === \"phone\" || current === \"tablet\")) return true;\n  return false;\n}\napp.initializers.add('xypp/more-bbcode', () => {\n  const tags = new TagCollector();\n  const priority = prioritySerial(100, 100);\n  addTypographyButtons(tags, priority);\n  addUtilitiesTags(tags, priority);\n  addEmbedTags(tags, priority);\n  addXX2SeeTags(tags, priority);\n  let hasAddCollectBtn = false;\n  let showMoreBBcodeButtons = false;\n  extend(buttonBar.prototype, \"clickEvent\", function (this: buttonBar, val: any, tag: Tags) {\n    if (tag.type === \"group\") return;\n    const close = (app.session?.user?.preferences() || {})[\"xypp-bbcode-more-auto-close\"] || \"phone\";\n    if (checkDevice(close)) {\n      showMoreBBcodeButtons = false;\n      m.redraw();\n    }\n  })\n  extend(TextEditor.prototype, \"toolbarItems\", function (this: TextEditor, items) {\n    const removeMd = checkDevice(app.forum.attribute(\"xypp-more-bbcode-remove_markdown\"));\n    const collectAll = checkDevice(app.forum.attribute(\"xypp-more-bbcode-collect_all\"));\n    if (removeMd) items.remove(\"markdown\");\n    if (collectAll) {\n      if (!hasAddCollectBtn) tags.group(0, \"collect\", \"fas fa-box-open\", \"xypp-more-bbcode.forum.collect\", () => { });\n      const collect = tags.item(\"collect\") as TagButtonGroup;\n      collect.tags.clear();\n      Object.keys(items.toObject()).forEach(function (key) {\n        if (key === \"markdown\") return;\n        const p = items.getPriority(key);\n        const item = items.get(key);\n        items.remove(key);\n        collect.tags.collect(0 - p, key, item);\n      });\n    } else if (hasAddCollectBtn) {\n      tags.remove(\"collect\");\n    }\n    items.add(\"xypp-more-bbcode\", TextEditorButton.component({\n      className: \"bbcode-more-btn Button Button--icon Button--link\",\n      position: \"bottom\",\n      onclick: (e: any) => {\n        e.currentTarget.blur();\n        showMoreBBcodeButtons = !showMoreBBcodeButtons;\n        m.redraw();\n      },\n      icon: showIf(showMoreBBcodeButtons, \"fa fa-minus\", \"fa fa-plus\")\n    }, app.translator.trans(\"xypp-more-bbcode.forum.name\")));\n    if (showMoreBBcodeButtons && (this.attrs as any)?.composer?.editor?.el)\n      items.add(\"xypp-more-bbcode-buttons\", buttonBar.component({\n        tagCollect: tags,\n        className: \"main-entry\",\n        textEditor: (this.attrs as any).composer.editor.el,\n        bottom: 57\n      }), -50000);\n  });\n  extend(TextEditor.prototype, [\"onupdate\", \"oncreate\"], function (this: TextEditor) {\n    if (!showMoreBBcodeButtons) return;\n    const btn = this.$(\".bbcode-more-btn\");\n    const elem = this.$(\".main-entry\");\n    align(btn, elem);\n  });\n  regSetting();\n}, -50000);\n","import TagCollector from \"../helper/tagCollector\";\r\nimport common from \"../utils/commonReplace\";\r\nimport { prioritySerial } from \"../utils/nodeUtil\";\r\nimport { bbcode, merge, pair, prefix } from \"../utils/styleUtil\";\r\n\r\nexport default function addTypographyButtons(tags: TagCollector, priority: () => number) {\r\n    // Fonts\r\n    tags.group(priority(), \"fonts\",\r\n        \"fas fa-bold\",\r\n        \"xypp-more-bbcode.forum.fonts.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Bold\r\n            tags.add(priority(), \"bold\",\r\n                \"fas fa-bold\",\r\n                \"xypp-more-bbcode.forum.fonts.bold\",\r\n                pair(\"**\"));\r\n            //Italic\r\n            tags.add(priority(), \"italic\",\r\n                \"fas fa-italic\",\r\n                \"xypp-more-bbcode.forum.fonts.italic\",\r\n                pair(\"*\"));\r\n            // Strike through\r\n            tags.add(priority(), \"strike-through\",\r\n                \"fas fa-strikethrough\",\r\n                \"xypp-more-bbcode.forum.fonts.strike_through\",\r\n                pair(\"~~\"));\r\n            // Underline\r\n            tags.add(priority(), \"underline\",\r\n                \"fas fa-underline\",\r\n                \"xypp-more-bbcode.forum.fonts.underline\",\r\n                bbcode(\"[ins]\"));\r\n        }\r\n    );\r\n    // Typography\r\n    tags.group(priority(), \"typography\",\r\n        \"fas fa-paragraph\",\r\n        \"xypp-more-bbcode.forum.typography.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Link\r\n            tags.add(priority(), \"url\",\r\n                \"fas fa-link\",\r\n                \"xypp-more-bbcode.forum.typography.link\",\r\n                merge(pair(\"[\", \"](\" + common(\"url\") + \")\"), {\r\n                    replaceNext: 'https://',\r\n                    scanFor: 'https?://'\r\n                }));\r\n            //Image\r\n            tags.add(priority(), \"image\",\r\n                \"fas fa-image\",\r\n                \"xypp-more-bbcode.forum.typography.image\",\r\n                merge(pair('![', '](' + common(\"url\") + ')'), {\r\n                    replaceNext: 'https://',\r\n                    scanFor: 'https?://'\r\n                }));\r\n            //Quote\r\n            tags.add(priority(), \"quote\",\r\n                \"fas fa-quote-right\",\r\n                \"xypp-more-bbcode.forum.typography.quote\",\r\n                merge(prefix(\"> \"), {\r\n                    multiline: true,\r\n                    surroundWithNewlines: true\r\n                }));\r\n            //Code\r\n            tags.add(priority(), \"code\",\r\n                \"fas fa-code\",\r\n                \"xypp-more-bbcode.forum.typography.code\",\r\n                merge(pair(\"`\", undefined, false), {\r\n                    blockPrefix: '```',\r\n                    blockSuffix: '```'\r\n                }));\r\n            //Spoiler\r\n            tags.add(priority(), \"spoiler\",\r\n                \"fas fa-eye-slash\",\r\n                \"xypp-more-bbcode.forum.typography.spoiler\",\r\n                merge(pair(\">!\", \"!<\"), {\r\n                    blockPrefix: '>! ',\r\n                    multiline: true\r\n                }));\r\n            //Dropcap\r\n            tags.add(priority(), \"dropcap\",\r\n                \"fas fa-caret-right\",\r\n                \"xypp-more-bbcode.forum.typography.dropcap\",\r\n                bbcode(\"[dropcap] \"));\r\n            tags.space(priority());\r\n            //Horizontal Line\r\n            tags.add(priority(), \"horizontal-line\",\r\n                \"fas fa-minus\",\r\n                \"xypp-more-bbcode.forum.typography.horizontal_line\",\r\n                bbcode(\"[hr]\"));\r\n            //Table\r\n            tags.add(priority(), \"table\",\r\n                \"fas fa-table\",\r\n                \"xypp-more-bbcode.forum.typography.table\",\r\n                prefix(`\r\n| ${common(\"column\")} | ${common(\"column\")} | ${common(\"column\")} | ${common(\"column\")} |\r\n|---|---|---|---|\r\n| ${common(\"any\")} | ${common(\"any\")} | ${common(\"any\")} | ${common(\"any\")} |\r\n                    `));\r\n            //Unordered List\r\n            tags.add(priority(), \"list-ul\",\r\n                \"fas fa-list-ul\",\r\n                \"xypp-more-bbcode.forum.typography.unordered_list\",\r\n                merge(prefix(\"\\n- \"), {\r\n                    multiline: true,\r\n                    surroundWithNewlines: true\r\n                }));\r\n            //Ordered List\r\n            tags.add(priority(), \"list-ol\",\r\n                \"fas fa-list-ol\",\r\n                \"xypp-more-bbcode.forum.typography.ordered_list\",\r\n                merge(prefix(\"\\n1. \"), {\r\n                    multiline: true,\r\n                    orderedList: true\r\n                }));\r\n        }\r\n    )\r\n    //Heading\r\n    tags.group(priority(), \"heading\",\r\n        \"fas fa-heading\",\r\n        \"xypp-more-bbcode.forum.heading.title\",\r\n        (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            const levels = [1, 2, 3, 4, 5, 6];\r\n            levels.forEach(level => {\r\n                tags.add(priority(), \"heading-\" + level,\r\n                    false,\r\n                    { key: \"xypp-more-bbcode.forum.heading.label\", params: { level: level } },\r\n                    pair(\"#\".repeat(level)));\r\n            });\r\n        }\r\n    );\r\n    //Aligns\r\n    tags.group(priority(), \"align\",\r\n        \"fas fa-align-justify\",\r\n        \"xypp-more-bbcode.forum.align.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            // + Align left\r\n            tags.add(priority(), \"align-left\",\r\n                \"fas fa-align-left\",\r\n                \"xypp-more-bbcode.forum.align.align_left\",\r\n                bbcode(\"[left]\"));\r\n            // + Align center\r\n            tags.add(priority(), \"align-center\",\r\n                \"fas fa-align-center\",\r\n                \"xypp-more-bbcode.forum.align.align_center\",\r\n                bbcode(\"[center]\"));\r\n            // + Align right\r\n            tags.add(priority(), \"align-right\",\r\n                \"fas fa-align-right\",\r\n                \"xypp-more-bbcode.forum.align.align_right\",\r\n                bbcode(\"[right]\"));\r\n            // + Justify\r\n            tags.add(priority(), \"justify\",\r\n                \"fas fa-align-justify\",\r\n                \"xypp-more-bbcode.forum.align.align_justify\",\r\n                bbcode(\"[justify]\"));\r\n            tags.space(priority());\r\n            //Padding\r\n            // + Padding Left\r\n            tags.add(priority(), \"padding-left\",\r\n                \"fas fa-arrow-alt-circle-left\",\r\n                \"xypp-more-bbcode.forum.align.padding_left\",\r\n                bbcode(\"[pleft]\"));\r\n            tags.add(priority(), \"padding-right\",\r\n                \"fas fa-arrow-alt-circle-right\",\r\n                \"xypp-more-bbcode.forum.align.padding_right\",\r\n                bbcode(\"[pright]\"));\r\n            tags.space(priority());\r\n            //Image Positioning\r\n            //+ Image Left\r\n            tags.add(priority(), \"image-left\",\r\n                () => <div className=\"stackIcon\">\r\n                    <i className=\"fas fa-image main\" />\r\n                    <i className=\"fas fa-arrow-alt-circle-left lb-corner\" />\r\n                </div>,\r\n                \"xypp-more-bbcode.forum.align.image_left\",\r\n                bbcode(\"[ileft]\"));\r\n            //+ Image Center\r\n            tags.add(priority(), \"image-center\",\r\n                () => <div className=\"stackIcon\">\r\n                    <i className=\"fas fa-image main\" />\r\n                    <i className=\"fas fa-arrow-alt-circle-up cb-corner\" />\r\n                </div>,\r\n                \"xypp-more-bbcode.forum.align.image_center\",\r\n                bbcode(\"[icenter]\"))\r\n            //+ Image Right\r\n            tags.add(priority(), \"image-right\",\r\n                () => <div className=\"stackIcon\">\r\n                    <i className=\"fas fa-image main\" />\r\n                    <i className=\"fas fa-arrow-alt-circle-right rb-corner\" />\r\n                </div>,\r\n                \"xypp-more-bbcode.forum.align.image_right\",\r\n                bbcode(\"[iright]\"));\r\n        });\r\n    //Size\r\n    tags.group(priority(), \"size\",\r\n        \"fas fa-text-height\",\r\n        \"xypp-more-bbcode.forum.size.title\", (tags) => {\r\n            const sizes = [18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40]\r\n            const priority = prioritySerial(100, 100);\r\n            sizes.forEach(size => {\r\n                tags.add(priority(), \"size-\" + size,\r\n                    false,\r\n                    { key: \"xypp-more-bbcode.forum.size.label\", params: { size: size } },\r\n                    bbcode(`[size=${size}]`));\r\n            });\r\n        }, 2\r\n    );\r\n    //Color\r\n    tags.group(priority(), \"color\",\r\n        \"fas fa-palette\",\r\n        \"xypp-more-bbcode.forum.color.title\", (tags) => {\r\n            const colors = [\r\n                \"grey\", \"green\", \"blue\", \"purple\", \"yellow\", \"orange\",\r\n                \"red\", \"silver\", \"pink\", \"brown\", \"white\", \"black\"]\r\n            const priority = prioritySerial(100, 100);\r\n            colors.forEach(color => {\r\n                tags.add(priority(), \"color-\" + color,\r\n                    () => <span style={`background:${color};`} className=\"color-indicator text\">A</span>,\r\n                    { key: \"xypp-more-bbcode.forum.color.label\", params: { color: color } },\r\n                    bbcode(`[color=${color}]`));\r\n            });\r\n        }, 2\r\n    )\r\n    //BackGround\r\n    tags.group(priority(), \"background\",\r\n        () => <i className=\"fas fa-fill-drip\" />,\r\n        \"xypp-more-bbcode.forum.background.title\", (tags) => {\r\n            const colors = [\r\n                \"grey\", \"green\", \"blue\", \"purple\", \"yellow\", \"orange\",\r\n                \"red\", \"silver\", \"pink\", \"brown\", \"white\", \"black\"]\r\n            const priority = prioritySerial(100, 100);\r\n            colors.forEach(color => {\r\n                tags.add(priority(), \"background-\" + color,\r\n                    () => <span style={`background:${color};`} className=\"color-indicator back\"></span>,\r\n                    { key: \"xypp-more-bbcode.forum.background.label\", params: { color: color } },\r\n                    bbcode(`[background=${color}]`));\r\n            });\r\n        }, 2\r\n    )\r\n    //Sign\r\n    tags.group(priority(), \"sign\",\r\n        \"fas fa-superscript\",\r\n        \"xypp-more-bbcode.forum.sign.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Superscript\r\n            tags.add(priority(), \"superscript\",\r\n                \"fas fa-superscript\",\r\n                \"xypp-more-bbcode.forum.sign.superscript\",\r\n                bbcode(\"[sup]\"));\r\n            //Subscript\r\n            tags.add(priority(), \"subscript\",\r\n                \"fas fa-subscript\",\r\n                \"xypp-more-bbcode.forum.sign.subscript\",\r\n                bbcode(\"[sub]\"));\r\n            //Acronym\r\n            tags.add(priority(), \"acronym\",\r\n                \"fas fa-question-circle\",\r\n                \"xypp-more-bbcode.forum.sign.acronym\",\r\n                bbcode(`[acronym title=\\\"${common(\"title\")}\\\"] ${common(\"describe\")}`));\r\n        }\r\n    )\r\n}","\r\nimport CommentPost from \"flarum/forum/components/CommentPost\";\r\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\";\r\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\r\nimport LogInModal from \"flarum/forum/components/LogInModal\";\r\nimport TagCollector from \"../helper/tagCollector\";\r\nimport { prioritySerial } from \"../utils/nodeUtil\";\r\nimport { bbcode } from \"../utils/styleUtil\";\r\nimport app from \"flarum/forum/app\";\r\nimport { extend } from \"flarum/common/extend\";\r\nimport Alert from \"flarum/common/components/Alert\";\r\nimport setRouteWithForcedRefresh from \"flarum/common/utils/setRouteWithForcedRefresh\";\r\n\r\n\r\nexport function addXX2SeeTags(tags: TagCollector, priority: () => number) {\r\n    //xx2see\r\n    tags.group(priority(), \"xx2see\",\r\n        \"fas fa-eye\",\r\n        \"xypp-more-bbcode.forum.xx2see.title\", (tags) => {\r\n            const priority = prioritySerial(100, 100);\r\n            //Login 2 See\r\n            tags.add(priority(), \"login2see\",\r\n                \"fas fa-user\",\r\n                \"xypp-more-bbcode.forum.xx2see.login.title\",\r\n                bbcode(\"[login]\")\r\n            );\r\n\r\n            //Reply 2 See\r\n            tags.add(priority(), \"reply2see\",\r\n                \"fas fa-reply\",\r\n                \"xypp-more-bbcode.forum.xx2see.reply.title\",\r\n                bbcode(\"[reply]\")\r\n            );\r\n\r\n            //Like 2 See\r\n            tags.add(priority(), \"like2see\",\r\n                \"fas fa-heart\",\r\n                \"xypp-more-bbcode.forum.xx2see.like.title\",\r\n                bbcode(\"[like]\")\r\n            );\r\n        }\r\n    );\r\n\r\n\r\n    extend(CommentPost.prototype, \"content\", function () {\r\n        if (app.session.user && app.current.matches(DiscussionPage)) {\r\n            $(\".reply2see_reply\")\r\n                .off(\"click\")\r\n                .on(\"click\", () =>\r\n                    DiscussionControls.replyAction.call(\r\n                        app.current.get(\"discussion\"),\r\n                        true,\r\n                        false\r\n                    )\r\n                );\r\n        } else {\r\n            $(\".reply2see_reply\")\r\n                .off(\"click\")\r\n                .on(\"click\", () => app.modal.show(LogInModal));\r\n            $(\".login2see_login\")\r\n                .off(\"click\")\r\n                .on(\"click\", () => app.modal.show(LogInModal));\r\n        }\r\n    });\r\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","showIf","judgement","vnode","def","prioritySerial","startValue","step","value","ret","align","base","elem","_base$offsetParent","_base$offsetParent$of","_base$offset","parentOffset","offsetParent","offset","left","realLeft","screenWid","$","document","body","width","targetWidth","globalOffset","css","buttonBar","_Component","_this","_len","arguments","length","args","Array","_key","apply","concat","selectedSub","_proto","view","_this2","rows","this","attrs","tags","tagCollect","groups","filter","tag","type","bottom","m","className","classList","style","getTags","map","group","component","textEditor","name","onupdate","element","find","children","preRow","Math","floor","currentRow","i","push","getTagComponent","row","class","clsName","icon","Tooltip","text","tooltip","position","Button","onclick","clickEventWarper","_this3","event","currentTarget","blur","clickEvent","_this4","redraw","styleSelectedText","data","Promise","then","Component","TagCollector","ItemList","spaceKey","getTranslation","app","trans","params","add","priority","tooltipKey","collect","space","callback","newGroup","item","clear","keys","toObject","forEach","k","remove","arr","toArray","disabled","attribute","itemName","reverse","common","merge","assign","pair","s","trim","prefix","suffix","trimFirst","bbcode","code","regex","exec","_trans","dat","isArray","join","alertPreviewModal","_Modal","done","typesOpt","availableMap","colorMap","available","oninit","title","content","availableDict","v","for","Select","options","onchange","e","generateStyle","custom","generateBBCode","s9e","TextFormatter","preview","onsubmit","preventDefault","close","onbeforeremove","oncancel","Modal","makeAlert","resolve","reject","show","tabId","createTab","each","container","$container","$inputs","$items","num","attr","is","setAttribute","$item","id","cloudPreviewModal","opts","makeCloud","checkDevice","target","current","replaceNext","scanFor","multiline","surroundWithNewlines","undefined","blockPrefix","blockSuffix","orderedList","level","repeat","size","color","addTypographyButtons","extend","CommentPost","ComposerPostPreview","addUtilitiesTags","addEmbedTags","user","matches","DiscussionPage","off","on","DiscussionControls","LogInModal","addXX2SeeTags","SELECT_AC","showMoreBBcodeButtons","val","_app$session","_app$session$user","preferences","TextEditor","items","_this$attrs","_this$attrs$composer","_this$attrs$composer$","removeMd","collectAll","getPriority","TextEditorButton","composer","editor","el","SettingsPage","FieldSet","label","savePreferences"],"sourceRoot":""}