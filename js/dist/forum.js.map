<<<<<<< HEAD
{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,c,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,mC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCSxDC,IAAAA,aAAAA,IAAqB,oBAAoB,YACvCC,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,gBAAgB,SAAUC,GAAO,IAAAC,EAAA,KAC5DD,EAAME,IACJ,eACAC,EAACC,IAAgB,CACfC,QAAS,WACPJ,EAAKK,MAAMC,SAASC,OAAOC,eAAe,mBAC1C,IAAMC,EAAQT,EAAKK,MAAMC,SAASC,OAAOG,oBACzCV,EAAKK,MAAMC,SAASC,OAAOI,aAAaF,EAAM,GAAK,EACrD,EACAG,KAAK,yBAEJhB,IAAAA,WAAAA,MAAqB,iDAG1BG,EAAME,IACJ,eACAC,EAACC,IAAgB,CACfC,QAAS,WACPJ,EAAKK,MAAMC,SAASC,OAAOC,eAAe,mBAC1C,IAAMC,EAAQT,EAAKK,MAAMC,SAASC,OAAOG,oBACzCV,EAAKK,MAAMC,SAASC,OAAOI,aAAaF,EAAM,GAAK,EACrD,EACAG,KAAK,sBAEJhB,IAAAA,WAAAA,MAAqB,iDAG1BG,EAAME,IACJ,eACAC,EAACC,IAAgB,CACfC,QAAS,WACPJ,EAAKK,MAAMC,SAASC,OAAOC,eAAe,2BAA6BZ,IAAAA,WAAAA,MAAqB,sCAAuC,QAAUA,IAAAA,WAAAA,MAAqB,oCAAqC,IAAMA,IAAAA,WAAAA,MAAqB,yCAA0C,YAC5Q,IAAMa,EAAQT,EAAKK,MAAMC,SAASC,OAAOG,oBACzCV,EAAKK,MAAMC,SAASC,OAAOI,aAAaF,EAAM,GAAK,EACrD,EACAG,KAAK,mBAEJhB,IAAAA,WAAAA,MAAqB,gDAG5B,KAEAC,EAAAA,EAAAA,QAAOgB,IAAAA,UAAuB,WAAW,WACnCjB,IAAAA,QAAAA,MAAoBA,IAAAA,QAAAA,QAAoBkB,KAC1CC,EAAE,oBACCC,IAAI,SACJC,GAAG,SAAS,kBACXC,IAAAA,YAAAA,KACEtB,IAAAA,QAAAA,IAAgB,eAChB,GACA,EACD,KAGLmB,EAAE,oBACCC,IAAI,SACJC,GAAG,SAAS,kBAAMrB,IAAAA,MAAAA,KAAeuB,IAAW,IAC/CJ,EAAE,oBACCC,IAAI,SACJC,GAAG,SAAS,kBAAMrB,IAAAA,MAAAA,KAAeuB,IAAW,IAEnD,GACF,G","sources":["webpack://@imeepo/flarum-more-bbcode/webpack/bootstrap","webpack://@imeepo/flarum-more-bbcode/webpack/runtime/compat get default export","webpack://@imeepo/flarum-more-bbcode/webpack/runtime/define property getters","webpack://@imeepo/flarum-more-bbcode/webpack/runtime/hasOwnProperty shorthand","webpack://@imeepo/flarum-more-bbcode/webpack/runtime/make namespace object","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['common/extend']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['common/app']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@imeepo/flarum-more-bbcode/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@imeepo/flarum-more-bbcode/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditorButton'];","import { extend } from \"flarum/common/extend\";\nimport app from \"flarum/common/app\";\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\";\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\nimport LogInModal from \"flarum/forum/components/LogInModal\";\nimport TextEditor from \"flarum/common/components/TextEditor\";\nimport TextEditorButton from \"flarum/common/components/TextEditorButton\";\n\napp.initializers.add(\"xypp/more-bbcode\", () => {\n  extend(TextEditor.prototype, \"toolbarItems\", function (items) {\n    items.add(\n      \"reply-to-see\",\n      <TextEditorButton\n        onclick={() => {\n          this.attrs.composer.editor.insertAtCursor(\"[reply][/reply]\");\n          const range = this.attrs.composer.editor.getSelectionRange();\n          this.attrs.composer.editor.moveCursorTo(range[1] - 8);\n        }}\n        icon=\"fa fa-comment-medical\"\n      >\n        {app.translator.trans(\"xypp-more-bbcode.forum.button_tooltip_reply\")}\n      </TextEditorButton>\n    );\n    items.add(\n      \"login-to-see\",\n      <TextEditorButton\n        onclick={() => {\n          this.attrs.composer.editor.insertAtCursor(\"[login][/login]\");\n          const range = this.attrs.composer.editor.getSelectionRange();\n          this.attrs.composer.editor.moveCursorTo(range[1] - 8);\n        }}\n        icon=\"fas fa-sign-in-alt\"\n      >\n        {app.translator.trans(\"xypp-more-bbcode.forum.button_tooltip_login\")}\n      </TextEditorButton>\n    );\n    items.add(\n      \"imeepo-cloud\",\n      <TextEditorButton\n        onclick={() => {\n          this.attrs.composer.editor.insertAtCursor('[cloud type=other title=' + app.translator.trans(\"xypp-more-bbcode.forum.cloud_title\") +' url=' + app.translator.trans(\"xypp-more-bbcode.forum.cloud_url\") +']' + app.translator.trans(\"xypp-more-bbcode.forum.cloud_password\") +'[/cloud]');\n          const range = this.attrs.composer.editor.getSelectionRange();\n          this.attrs.composer.editor.moveCursorTo(range[1] - 8);\n        }}\n        icon=\"fas fa-download\"\n      >\n        {app.translator.trans(\"xypp-more-bbcode.forum.button_tooltip_cloud\")}\n      </TextEditorButton>\n    );\n  });\n\n  extend(CommentPost.prototype, \"content\", function () {\n    if (app.session.user && app.current.matches(DiscussionPage)) {\n      $(\".reply2see_reply\")\n        .off(\"click\")\n        .on(\"click\", () =>\n          DiscussionControls.replyAction.call(\n            app.current.get(\"discussion\"),\n            true,\n            false\n          )\n        );\n    } else {\n      $(\".reply2see_reply\")\n        .off(\"click\")\n        .on(\"click\", () => app.modal.show(LogInModal));\n      $(\".login2see_login\")\n        .off(\"click\")\n        .on(\"click\", () => app.modal.show(LogInModal));\n    }\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","extend","TextEditor","items","_this","add","m","TextEditorButton","onclick","attrs","composer","editor","insertAtCursor","range","getSelectionRange","moveCursorTo","icon","CommentPost","DiscussionPage","$","off","on","DiscussionControls","LogInModal"],"sourceRoot":""}
=======
{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@litalino/flarum-more-bbcode/webpack/bootstrap","webpack://@litalino/flarum-more-bbcode/webpack/runtime/compat get default export","webpack://@litalino/flarum-more-bbcode/webpack/runtime/define property getters","webpack://@litalino/flarum-more-bbcode/webpack/runtime/hasOwnProperty shorthand","webpack://@litalino/flarum-more-bbcode/webpack/runtime/make namespace object","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/app']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['extend']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['components/TextEditor']\"","webpack://@litalino/flarum-more-bbcode/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@litalino/flarum-more-bbcode/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/extend']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/Component']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Button']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/PostStream']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['forum/components/ComposerPostPreview']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/BasicEditorDriver']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/utils/styleSelectedText']\"","webpack://@litalino/flarum-more-bbcode/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@litalino/flarum-more-bbcode/./src/forum/MarkdownButton.js","webpack://@litalino/flarum-more-bbcode/./src/forum/TextEditorButton.js","webpack://@litalino/flarum-more-bbcode/./src/forum/index.js","webpack://@litalino/flarum-more-bbcode/./src/forum/addTextEditorButton.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/TextEditor'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostStream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ComposerPostPreview'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/BasicEditorDriver'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/styleSelectedText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import Component from \"flarum/common/Component\";\nimport icon from \"flarum/common/helpers/icon\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\n\nexport default class MarkdownButton extends Component {\n  oncreate(vnode) {\n    super.oncreate(vnode);\n  }\n\n  view() {\n    const button = (\n      <button\n        className=\"Button Button--icon Button--link\"\n        type=\"button\"\n        data-hotkey={this.attrs.hotkey}\n        onkeydown={this.keydown.bind(this)}\n        onclick={this.attrs.onclick}\n      >\n        {icon(this.attrs.icon)}\n      </button>\n    );\n\n    if (this.attrs.title) {\n      return <Tooltip text={this.attrs.title}>{button}</Tooltip>;\n    }\n\n    return button;\n  }\n\n  keydown(event) {\n    if (event.key === \" \" || event.key === \"Enter\") {\n      event.preventDefault();\n      this.element.click();\n    }\n  }\n}\n","/*\n * This file is part of MathRen.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport { extend } from \"flarum/common/extend\";\nimport app from \"flarum/common/app\";\n\nimport Button from \"flarum/common/components/Button\";\nimport Component from \"flarum/common/Component\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\n//import Separator from \"flarum/common/components/Separator\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport icon from \"flarum/common/helpers/icon\";\n\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\";\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\nimport LogInModal from \"flarum/forum/components/LogInModal\";\n\nimport PostStream from \"flarum/forum/components/PostStream\";\n//import Separator from \"flarum/components/Separator\";\n\nimport ComposerPostPreview from \"flarum/forum/components/ComposerPostPreview\";\n\n///////////////////\nimport BasicEditorDriver from 'flarum/common/utils/BasicEditorDriver';\n\nimport styleSelectedText from \"flarum/common/utils/styleSelectedText\";\n\nimport MarkdownButton from \"./MarkdownButton\";\n\n///////////////////\n\nexport default class TextEditorButton extends Component {\n  view() {\n    return Dropdown.component(\n      {\n        className: \"More-bbcode-buttonsDropdown\",\n        buttonClassName: \"Button Button--flat\",\n        label: icon(\"fas fa-th-large\"),\n      },\n      this.markdownToolbarItems().toArray()\n    );\n  }\n  /**\n   * Build an item list for the contents of the dropdown menu.\n   * \n   */\n  markdownToolbarItems(oldFunc) {\n    \n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      header: { prefix: '### ' },\n      bold: { prefix: '**', suffix: '**', trimFirst: true },\n      italic: { prefix: '_', suffix: '_', trimFirst: true },\n      strikethrough: { prefix: '~~', suffix: '~~', trimFirst: true },\n      quote: { prefix: '> ', multiline: true, surroundWithNewlines: true },\n      code: { prefix: '`', suffix: '`', blockPrefix: '```', blockSuffix: '```' },\n      link: { prefix: '[', suffix: '](https://)', replaceNext: 'https://', scanFor: 'https?://' },\n      image: { prefix: '![', suffix: '](https://)', replaceNext: 'https://', scanFor: 'https?://' },\n      unordered_list: { prefix: '- ', multiline: true, surroundWithNewlines: true },\n      ordered_list: { prefix: '1. ', multiline: true, orderedList: true },\n      spoiler: { prefix: '>!', suffix: '!<', blockPrefix: '>! ', multiline: true, trimFirst: true },\n\n      left: { prefix: '[left] ', suffix: ' [/left]', trimFirst: true },\n      center: { prefix: '[center] ', suffix: ' [/center]', trimFirst: true },\n      right: { prefix: '[right] ', suffix: ' [/right]', trimFirst: true },\n      justify: { prefix: '[justify] ', suffix: ' [/justify]', trimFirst: true },\n      dropcap: { prefix: '[dropcap] ', suffix: ' [/dropcap]', trimFirst: true },\n      ileft: { prefix: '[Ileft] ', suffix: ' [/Iileft]', trimFirst: true },\n      iright: { prefix: '[Iright] ', suffix: ' [/Iright]', trimFirst: true },\n      pleft: { prefix: '[pleft] ', suffix: ' [/pleft]', trimFirst: true },\n      pright: { prefix: '[pright] ', suffix: ' [/pright]', trimFirst: true },\n      details: { prefix: '[details=\"TITLE\"] CONTENT ', suffix: '[/details]', blockPrefix: '[/details]', trimFirst: true },\n      like: { prefix: '[like] ', suffix: ' [/like]', trimFirst: true },\n      reply: { prefix: '[reply] ', suffix: ' [/reply]', trimFirst: true },\n      login: { prefix: '[login] ', suffix: ' [/login]', trimFirst: true },\n      cloud: { prefix: '[cloud type=\"other\" title=\"title\" url=\"link\"] Insert Password or Remove Text \"Password\" ', suffix: '[/cloud]', trimFirst: true },\n      down: { prefix: '[down link=\"URL\" size=\"2KB\" name=\"file.zip\"]', trimFirst: true },\n      audio: { prefix: '[audio mp3=\"URL\"]', trimFirst: true },\n      clip: { prefix: '[clip mp4=\"URL\"]', trimFirst: true },\n      table: { prefix: '\\n| Column 1 | Column 2 | Column 3 | Column 4 |\\n|---|---|---|---|\\n| row 1 | row 2 | row 3 | row 4 |\\n', trimFirst: true },\n      word: { prefix: '[gdoc] ', suffix: ' [/gdoc]', trimFirst: true },\n      size: { prefix: '[size=16] ', suffix: ' [/size]', trimFirst: true },\n      color: { prefix: '[color=red] ', suffix: ' [/color]', trimFirst: true },\n      tab: { prefix: '\\n[tabs]\\n[tab=\"hi\"]Hi[/tab]\\n[tab=\"hello\"]Hello[/tab]\\n[/tabs]\\n', trimFirst: true },\n      iframe: { prefix: '<iframe style=\"border:none;\" width=\"100%\"  height=\"370px\" class=\"iframe_src\" title=\"Iframe Example\" src=\"Iframe URL\">', suffix: '</iframe>', replaceNext: 'https://', scanFor: 'https?://', trimFirst: true },\n      bar: { prefix: '[pbar]Title,ProgressText,BorderColor,ProgressColor,LittleColor,BorderSize,Progress%,BorderRadius,BottomMargin', suffix: ' [/pbar]', trimFirst: true },\n    };\n\n    extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      items.add('left', makeShortcut('left', 'l', this));\n      items.add('center', makeShortcut('center', 'g', this));\n      items.add('right', makeShortcut('right', 'r', this));\n      items.add('justify', makeShortcut('justify', 'j', this));\n\n      items.add('strikethrough', makeShortcut('strikethrough', 'n', this));\n      items.add('quote', makeShortcut('quote', 'q', this));\n      items.add('spoiler', makeShortcut('spoiler', 's', this));\n      items.add('code', makeShortcut('code', 'm', this));\n      items.add('link', makeShortcut('link', 'd', this));\n      items.add('image', makeShortcut('image', 'h', this));\n      items.add('unordered_list', makeShortcut('unordered_list', 'u', this));\n      items.add('ordered_list', makeShortcut('ordered_list', 'o', this));\n    });\n  \n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    const items = typeof oldFunc === 'function' ? oldFunc() : new ItemList();\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    //items.add('header', <MarkdownButton title={tooltip('lib.header_tooltip')} icon=\"fas fa-heading\" onclick={makeApplyStyle('header')} />, 20000);\n    \n    \n    items.add(\n      \"heading\",\n      /*Button.component(\n        {\n          className: \"More-BBcode-Dropdown\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-th-large\"),\n        }\n        //this.menu2().toArray()\n      ),\n      0*/\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-heading\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-paragraph\"),\n        },\n        this.heading().toArray()\n      ),\n      20000\n    );\n    items.add('bold', <MarkdownButton title={tooltip('lib.bold_tooltip', 'b')} icon=\"fas fa-bold\" onclick={makeApplyStyle('bold')} />, 19000);\n    items.add('italic', <MarkdownButton title={tooltip('lib.italic_tooltip', 'i')} icon=\"fas fa-italic\" onclick={makeApplyStyle('italic')} />, 18000);\n    items.add(\n      'strikethrough',\n      <MarkdownButton title={tooltip('lib.strikethrough_tooltip', 'n')} icon=\"fas fa-strikethrough\" onclick={makeApplyStyle('strikethrough')} />,\n      17000\n    );\n    items.add('quote', <MarkdownButton title={tooltip('lib.quote_tooltip', 'q')} icon=\"fas fa-quote-left\" onclick={makeApplyStyle('quote')} />, 16000);\n    items.add('spoiler', <MarkdownButton title={tooltip('lib.spoiler_tooltip', 's')} icon=\"fas fa-exclamation-triangle\" onclick={makeApplyStyle('spoiler')} />, 15000);\n    items.add('code', <MarkdownButton title={tooltip('lib.code_tooltip', 'm')} icon=\"fas fa-code\" onclick={makeApplyStyle('code')} />, 14000);\n    items.add('link', <MarkdownButton title={tooltip('lib.link_tooltip', 'd')} icon=\"fas fa-link\" onclick={makeApplyStyle('link')} />, 13000);\n    items.add('image', <MarkdownButton title={tooltip('lib.image_tooltip', 'h')} icon=\"fas fa-image\" onclick={makeApplyStyle('image')} />, 12000);\n    items.add(\n      \"image_add\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-img\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-image\"),\n        },\n        this.image_add().toArray()\n      ),\n      11500\n    );   \n    items.add(\n      'unordered_list',\n      <MarkdownButton title={tooltip('lib.unordered_list_tooltip', 'u')} icon=\"fas fa-list-ul\" onclick={makeApplyStyle('unordered_list')} />,\n      11000\n    );\n    items.add('ordered_list', <MarkdownButton title={tooltip('lib.ordered_list_tooltip', 'o')} icon=\"fas fa-list-ol\" onclick={makeApplyStyle('ordered_list')} />, 10000);\n\n    items.add(\n      \"text_add\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-text\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-info-circle\"),\n        },\n        this.text_add().toArray()\n      ),\n      9600\n    ); \n    items.add('left', <MarkdownButton title={tooltip('button_tooltip_left', 'l')} icon=\"fas fa-align-left\" onclick={makeApplyStyle('left')} />, 9500);\n    items.add('center', <MarkdownButton title={tooltip('button_tooltip_center', 'g')} icon=\"fas fa-align-center\" onclick={makeApplyStyle('center')} />, 9000);\n    items.add('right', <MarkdownButton title={tooltip('button_tooltip_right', 'r')} icon=\"fas fa-align-right\" onclick={makeApplyStyle('right')} />, 8500);\n    items.add('justify', <MarkdownButton title={tooltip('button_tooltip_justify', 'j')} icon=\"fas fa-align-justify\" onclick={makeApplyStyle('justify')} />, 8000);\n    //items.add('dropcap', <MarkdownButton title={tooltip('button_tooltip_dropcap')} icon=\"fas fa-list-alt\" onclick={makeApplyStyle('dropcap')} />, 7500);\n    //items.add('ileft', <MarkdownButton title={tooltip('button_tooltip_img_left')} icon=\"fas fa-fast-backward\" onclick={makeApplyStyle('ileft')} />, 7000);\n    //items.add('iright', <MarkdownButton title={tooltip('button_tooltip_img_right')} icon=\"fas fa-fast-forward\" onclick={makeApplyStyle('iright')} />, 6500);\n    items.add('pleft', <MarkdownButton title={tooltip('button_tooltip_p_left')} icon=\"fas fa-outdent\" onclick={makeApplyStyle('pleft')} />, 6000);\n    items.add('pright', <MarkdownButton title={tooltip('button_tooltip_p_right')} icon=\"fas fa-indent\" onclick={makeApplyStyle('pright')} />, 5500);\n    items.add('details', <MarkdownButton title={tooltip('button_tooltip_details')} icon=\"fas fa-eye-slash\" onclick={makeApplyStyle('details')} />, 5000);\n    items.add('like', <MarkdownButton title={tooltip('button_tooltip_like')} icon=\"fas fa-thumbs-up\" onclick={makeApplyStyle('like')} />, 4500);\n    items.add('reply', <MarkdownButton title={tooltip('button_tooltip_reply')} icon=\"fas fa-reply-all\" onclick={makeApplyStyle('reply')} />, 4000);\n    items.add('login', <MarkdownButton title={tooltip('button_tooltip_login')} icon=\"fas fa-sign-in-alt\" onclick={makeApplyStyle('login')} />, 3500);\n    items.add('cloud', <MarkdownButton title={tooltip('button_tooltip_cloud')} icon=\"fas fa-cloud\" onclick={makeApplyStyle('cloud')} />, 3000);\n    items.add('down', <MarkdownButton title={tooltip('button_tooltip_down')} icon=\"fas fa-download\" onclick={makeApplyStyle('down')} />, 2500);\n    items.add('audio', <MarkdownButton title={tooltip('button_tooltip_audio')} icon=\"fas fa-file-audio\" onclick={makeApplyStyle('audio')} />, 2000);\n    items.add('clip', <MarkdownButton title={tooltip('button_tooltip_clip')} icon=\"fas fa-file-video\" onclick={makeApplyStyle('clip')} />, 1500);\n    items.add('table', <MarkdownButton title={tooltip('button_tooltip_table')} icon=\"fas fa-table\" onclick={makeApplyStyle('table')} />, 1000);\n    items.add('word', <MarkdownButton title={tooltip('button_tooltip_word')} icon=\"fas fa-file-word\" onclick={makeApplyStyle('word')} />, 950);\n    //items.add('size', <MarkdownButton title={tooltip('button_tooltip_size')} icon=\"fas fa-text-height\" onclick={makeApplyStyle('size')} />, 1000);\n    //items.add('color', <MarkdownButton title={tooltip('button_tooltip_color')} icon=\"fas fa-palette\" onclick={makeApplyStyle('color')} />, 1000);\n    //items.add('bar', <MarkdownButton title={tooltip('button_tooltip_bar')} icon=\"fas fa-tasks\" onclick={makeApplyStyle('bar')} />, 800);\n    \n    items.add(\n      \"color\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-color\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-palette\"),\n        },\n        this.color().toArray()\n      ),\n      900\n    );    \n    items.add(\n      \"size\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-size\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-text-height\"),\n        },\n        this.size().toArray()\n      ),\n      850\n    );\n    items.add(\n      \"alert\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-alert\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-bell\"),\n        },\n        this.alert().toArray()\n      ),\n      800\n    );\n    items.add(\n      \"bar\",\n      Dropdown.component(\n        {\n          className: \"More-BBcode-Dropdown item-bar\",\n          //buttonClassName: \"Button Button--flat\",\n          label: icon(\"fas fa-server\"),\n        },\n        this.bar().toArray()\n      ),\n      700\n    );\n    items.add('iframe', <MarkdownButton title={tooltip('button_tooltip_iframe')} icon=\"fas fa-compress\" onclick={makeApplyStyle('iframe')} />, 100);\n    items.add('tab', <MarkdownButton title={tooltip('button_tooltip_tab')} icon=\"fas fa-tasks\" onclick={makeApplyStyle('tab')} />, 0);\n\n    return items;\n  }\n\n    /**\n   * Build an item list for the contents of the dropdown menu.\n   *\n   * @return {ItemList}\n   */\n\n  size(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      size_18: { prefix: \"[size=18] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_20: { prefix: \"[size=20] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_22: { prefix: \"[size=22] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_24: { prefix: \"[size=24] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_26: { prefix: \"[size=26] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_28: { prefix: \"[size=28] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_30: { prefix: \"[size=30] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_32: { prefix: \"[size=32] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_34: { prefix: \"[size=34] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_36: { prefix: \"[size=36] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_38: { prefix: \"[size=38] Change text\", suffix: \" [/size]\", trimFirst: true },\n      size_40: { prefix: \"[size=40] Change text\", suffix: \" [/size]\", trimFirst: true },\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n    //  items.add(\"h2\", makeShortcut(\"h2\", \"2\", this));\n    //  items.add(\"h3\", makeShortcut(\"h3\", \"3\", this));\n    //  items.add('h4', makeShortcut('h4', '4', this));\n    //});\n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('size_18', <MarkdownButton title={tooltip('size_18')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_18')} />, 2000);\n    items.add('size_20', <MarkdownButton title={tooltip('size_20')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_20')} />, 1900);\n    items.add('size_22', <MarkdownButton title={tooltip('size_22')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_22')} />, 1800);\n    items.add('size_24', <MarkdownButton title={tooltip('size_24')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_24')} />, 1700);\n    items.add('size_26', <MarkdownButton title={tooltip('size_26')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_26')} />, 1600);\n    items.add('size_28', <MarkdownButton title={tooltip('size_28')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_28')} />, 1500);\n    items.add('size_30', <MarkdownButton title={tooltip('size_30')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_30')} />, 1400);\n    items.add('size_32', <MarkdownButton title={tooltip('size_32')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_32')} />, 1300);\n    items.add('size_34', <MarkdownButton title={tooltip('size_34')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_34')} />, 1200);\n    items.add('size_36', <MarkdownButton title={tooltip('size_36')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_36')} />, 1100);\n    items.add('size_38', <MarkdownButton title={tooltip('size_38')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_38')} />, 1000);\n    items.add('size_40', <MarkdownButton title={tooltip('size_40')} icon=\"fas fa-font\" onclick={makeApplyStyle('size_40')} />, 900);\n    \n    return items;\n  }\n\n  color(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      //colorT: { prefix: \"[colort] Change text\", suffix: \" [/colort]\", trimFirst: true },\n      //colorG: { prefix: \"[colorg] Change text\", suffix: \" [/colorg]\", trimFirst: true },\n      //colorB: { prefix: \"[colorb] Change text\", suffix: \" [/colorb]\", trimFirst: true },\n      //colorP: { prefix: \"[colorp] Change text\", suffix: \" [/colorp]\", trimFirst: true },\n      //colorY: { prefix: \"[colory] Change text\", suffix: \" [/colory]\", trimFirst: true },\n      //colorO: { prefix: \"[coloro] Change text\", suffix: \" [/coloro]\", trimFirst: true },\n      //colorR: { prefix: \"[colorr] Change text\", suffix: \" [/colorr]\", trimFirst: true },\n      //colorS: { prefix: \"[colors] Change text\", suffix: \" [/colors]\", trimFirst: true },\n      \n      color_grey: { prefix: \"[color=grey] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_green: { prefix: \"[color=green] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_blue: { prefix: \"[color=blue] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_purple: { prefix: \"[color=purple] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_yellow: { prefix: \"[color=yellow] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_orange: { prefix: \"[color=orange] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_red: { prefix: \"[color=red] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_silver: { prefix: \"[color=silver] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_pink: { prefix: \"[color=pink] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_brown : { prefix: \"[color=brown] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_white : { prefix: \"[color=white] Change text\", suffix: \" [/color]\", trimFirst: true },\n      color_black : { prefix: \"[color=black] Change text\", suffix: \" [/color]\", trimFirst: true },\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n    //  items.add(\"h2\", makeShortcut(\"h2\", \"2\", this));\n    //  items.add(\"h3\", makeShortcut(\"h3\", \"3\", this));\n    //  items.add('h4', makeShortcut('h4', '4', this));\n    //});\n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    //items.add('colorT', <MarkdownButton title={tooltip('color_grey')} icon=\"fas fa-color-t\" onclick={makeApplyStyle('colorT')} />, 1000);\n    //items.add('colorG', <MarkdownButton title={tooltip('color_green')} icon=\"fas fa-color-g\" onclick={makeApplyStyle('colorG')} />, 1000);\n    //items.add('colorB', <MarkdownButton title={tooltip('color_blue')} icon=\"fas fa-color-b\" onclick={makeApplyStyle('colorB')} />, 1000);\n    //items.add('colorP', <MarkdownButton title={tooltip('color_purple')} icon=\"fas fa-color-p\" onclick={makeApplyStyle('colorP')} />, 1000);\n    //items.add('colorY', <MarkdownButton title={tooltip('color_yellow')} icon=\"fas fa-color-y\" onclick={makeApplyStyle('colorY')} />, 1000);\n    //items.add('colorO', <MarkdownButton title={tooltip('color_ogran')} icon=\"fas fa-color-o\" onclick={makeApplyStyle('colorO')} />, 1000);\n    //items.add('colorR', <MarkdownButton title={tooltip('color_red')} icon=\"fas fa-color-r\" onclick={makeApplyStyle('colorR')} />, 1000);\n    //items.add('colorS', <MarkdownButton title={tooltip('color_silver')} icon=\"fas fa-color-s\" onclick={makeApplyStyle('colorS')} />, 1000);\n\n    items.add('color_grey', <MarkdownButton title={tooltip('color_grey')} icon=\"fas fa-color-grey\" onclick={makeApplyStyle('color_grey')} />, 1000);\n    items.add('color_green', <MarkdownButton title={tooltip('color_green')} icon=\"fas fa-color-green\" onclick={makeApplyStyle('color_green')} />, 1000);\n    items.add('color_blue', <MarkdownButton title={tooltip('color_blue')} icon=\"fas fa-color-blue\" onclick={makeApplyStyle('color_blue')} />, 1000);\n    items.add('color_purple', <MarkdownButton title={tooltip('color_purple')} icon=\"fas fa-color-purple\" onclick={makeApplyStyle('color_purple')} />, 1000);\n    items.add('color_yellow', <MarkdownButton title={tooltip('color_yellow')} icon=\"fas fa-color-yellow\" onclick={makeApplyStyle('color_yellow')} />, 1000);\n    items.add('color_orange', <MarkdownButton title={tooltip('color_orange')} icon=\"fas fa-color-orange\" onclick={makeApplyStyle('color_orange')} />, 1000);\n    items.add('color_red', <MarkdownButton title={tooltip('color_red')} icon=\"fas fa-color-red\" onclick={makeApplyStyle('color_red')} />, 1000);\n    items.add('color_silver', <MarkdownButton title={tooltip('color_silver')} icon=\"fas fa-color-silver\" onclick={makeApplyStyle('color_silver')} />, 1000);\n    items.add('color_pink', <MarkdownButton title={tooltip('color_pink')} icon=\"fas fa-color-pink\" onclick={makeApplyStyle('color_pink')} />, 1000);\n    items.add('color_brown', <MarkdownButton title={tooltip('color_brown')} icon=\"fas fa-color-brown\" onclick={makeApplyStyle('color_brown')} />, 1000);\n    items.add('color_white ', <MarkdownButton title={tooltip('color_white')} icon=\"fas fa-color-white\" onclick={makeApplyStyle('color_white')} />, 1000);\n    items.add('color_black', <MarkdownButton title={tooltip('color_black')} icon=\"fas fa-color-black\" onclick={makeApplyStyle('color_black')} />, 1000);\n\n    return items;\n  }\n  heading(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      h2: { prefix: '## ', suffix: ' ##', trimFirst: true },\n      h3: { prefix: '### ', suffix: ' ###', trimFirst: true },\n      h4: { prefix: '#### ', suffix: ' ####', trimFirst: true },\n      h5: { prefix: '##### ', suffix: ' #####', trimFirst: true },\n      h6: { prefix: '###### ', suffix: ' ######', trimFirst: true },\n    };\n\n    extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      items.add(\"h2\", makeShortcut(\"h2\", \"2\", this));\n      items.add(\"h3\", makeShortcut(\"h3\", \"3\", this));\n      items.add('h4', makeShortcut('h4', '4', this));\n    });\n  \n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('h2', <MarkdownButton title={tooltip('h2', '2')} icon=\"fas fa-h2\" onclick={makeApplyStyle('h2')} />, 500);\n    items.add('h3', <MarkdownButton title={tooltip('h3', '3')} icon=\"fas fa-h3\" onclick={makeApplyStyle('h3')} />, 400);\n    items.add('h4', <MarkdownButton title={tooltip('h4', '4')} icon=\"fas fa-h4\" onclick={makeApplyStyle('h4')} />, 300);\n    items.add('h5', <MarkdownButton title={tooltip('h5', '5')} icon=\"fas fa-h5\" onclick={makeApplyStyle('h5')} />, 200);\n    items.add('h6', <MarkdownButton title={tooltip('h6', '6')} icon=\"fas fa-h6\" onclick={makeApplyStyle('h6')} />, 100);\n    /*items.add(\n      \"h2\",\n      Button.component(\n        {\n          icon: \"fas fa-align-right\",\n          onclick: () => this.right(),\n        },\n        app.translator.trans(\"imeepo-more-bbcode.forum.button_tooltip_right\")\n      ),\n      50\n    );*/\n\n\n    return items;\n  }\n  alert(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      warning: { prefix: '[awarning] this is an awarning message.', suffix: ' [/awarning]', trimFirst: true },\n      asuccess: { prefix: '[asuccess] this is an asuccess message.', suffix: ' [/asuccess]', trimFirst: true },\n      ainfo: { prefix: '[ainfo] this is an ainfo message.', suffix: ' [/ainfo]', trimFirst: true },\n      abasic: { prefix: '[abasic] this is an abasic message.', suffix: ' [/abasic]', trimFirst: true },\n      acustom: { prefix: '[acustom]red,black,green,this is an acustom message.', suffix: ' [/acustom]', trimFirst: true },\n      bcustom: { prefix: '[bcustom]title=this is a bcustom title font=red bg=black border=green', suffix: '[/bcustom]', trimFirst: true },\n      \n      bwarning: { prefix: '[bwarning] this is n bwarning message.', suffix: ' [/bwarning]', trimFirst: true },\n      bsuccess: { prefix: '[bsuccess] this is an bsuccess message.', suffix: ' [/bsuccess]', trimFirst: true },\n      berror: { prefix: '[berror] this is a berror message.', suffix: ' [/berror]', trimFirst: true },\n      bnotice: { prefix: '[bnotice] this is an bnotice message.', suffix: ' [/bnotice]', trimFirst: true },\n\n      cwarning: { prefix: '[cwarning]darkorange,white,darkorange,THIS IS A CWARNING TITLE,This is a CWARNING message.', suffix: ' [/cwarning]', trimFirst: true },\n      cnotice: { prefix: '[cnotice]teal,white,teal,this is a cnotice title,this is a cnotice message.', suffix: ' [/cnotice]', trimFirst: true },\n      cerror: { prefix: '[cerror]red,white,red,this is a cerror title,this is a cerror message.', suffix: ' [/cerror]', trimFirst: true },\n      csuccess: { prefix: '[csuccess]green,white,green,this is a cerror title,this is a csuccess message.', suffix: ' [/csuccess]', trimFirst: true },\n\n      dnotice: { prefix: '[dnotice title=\"this is a dnotice title\" font=\"teal\" bg=\"white\" border=\"teal\"] this is a dnotice message.', suffix: ' [/dnotice]', trimFirst: true },\n      derror: { prefix: '[derror title=\"this is a derror title\" font=\"red\" bg=\"white\" border=\"red\"]this is a derror message.', suffix: ' [/derror]', trimFirst: true },\n      dwarning: { prefix: '[dwarning title=\"this is a dwarning title\" font=\"darkorange\" bg=\"white\" border=\"darkorange\"]this is a dwarning message.', suffix: ' [/dwarning]', trimFirst: true },\n      dsuccess: { prefix: '[dsuccess title=\"this is a dsuccess title\" font=\"green\" bg=\"white\" border=\"green\"]this is a dsuccess message.', suffix: ' [/dsuccess]', trimFirst: true },\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      //items.add(\"h2\", makeShortcut(\"h2\", \"2\", this));\n      //items.add(\"h3\", makeShortcut(\"h3\", \"3\", this));\n      //items.add('h4', makeShortcut('h4', '4', this));\n    //});\n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('warning', <MarkdownButton title={tooltip('button_tooltip_notification_warning')} icon=\"fas fa-warning\" onclick={makeApplyStyle('warning')} />, 2000);\n    items.add('asuccess', <MarkdownButton title={tooltip('button_tooltip_notification_asuccess')} icon=\"fas fa-asuccess\" onclick={makeApplyStyle('asuccess')} />, 1900);\n    items.add('ainfo', <MarkdownButton title={tooltip('button_tooltip_notification_asuccess')} icon=\"fas fa-ainfo\" onclick={makeApplyStyle('ainfo')} />, 1800);\n    items.add('abasic', <MarkdownButton title={tooltip('button_tooltip_notification_abasic')} icon=\"fas fa-abasic\" onclick={makeApplyStyle('abasic')} />, 1700);\n    items.add('acustom', <MarkdownButton title={tooltip('button_tooltip_notification_acustom')} icon=\"fas fa-acustom\" onclick={makeApplyStyle('acustom')} />, 1600);\n    items.add('bcustom', <MarkdownButton title={tooltip('button_tooltip_notification_bcustom')} icon=\"fas fa-bcustom\" onclick={makeApplyStyle('bcustom')} />, 800);\n    \n    items.add('bwarning', <MarkdownButton title={tooltip('button_tooltip_notification_bwarning')} icon=\"fas fa-bwarning\" onclick={makeApplyStyle('bwarning')} />, 1500);\n    items.add('bsuccess', <MarkdownButton title={tooltip('button_tooltip_notification_bsuccess')} icon=\"fas fa-bsuccess\" onclick={makeApplyStyle('bsuccess')} />, 1400);\n    items.add('berror', <MarkdownButton title={tooltip('button_tooltip_notification_berror')} icon=\"fas fa-berror\" onclick={makeApplyStyle('berror')} />, 1300);\n    items.add('bnotice', <MarkdownButton title={tooltip('button_tooltip_notification_bnotice')} icon=\"fas fa-bnotice\" onclick={makeApplyStyle('bnotice')} />, 1100);\n    \n    items.add('cwarning', <MarkdownButton title={tooltip('button_tooltip_notification_cwarning')} icon=\"fas fa-cwarning\" onclick={makeApplyStyle('cwarning')} />, 1200);\n    items.add('cnotice', <MarkdownButton title={tooltip('button_tooltip_notification_cnotice')} icon=\"fas fa-cnotice\" onclick={makeApplyStyle('cnotice')} />, 1100);\n    items.add('cerror', <MarkdownButton title={tooltip('button_tooltip_notification_cerror')} icon=\"fas fa-cerror\" onclick={makeApplyStyle('cerror')} />, 1000);\n    items.add('csuccess', <MarkdownButton title={tooltip('button_tooltip_notification_csuccess')} icon=\"fas fa-csuccess\" onclick={makeApplyStyle('csuccess')} />, 900);\n    \n    items.add('dnotice', <MarkdownButton title={tooltip('button_tooltip_notification_dnotice')} icon=\"fas fa-dnotice\" onclick={makeApplyStyle('dnotice')} />, 700);\n    items.add('derror', <MarkdownButton title={tooltip('button_tooltip_notification_derror')} icon=\"fas fa-derror\" onclick={makeApplyStyle('derror')} />, 600);\n    items.add('dwarning', <MarkdownButton title={tooltip('button_tooltip_notification_dwarning')} icon=\"fas fa-dwarning\" onclick={makeApplyStyle('dwarning')} />, 500);\n    items.add('dsuccess', <MarkdownButton title={tooltip('button_tooltip_notification_dsuccess')} icon=\"fas fa-dsuccess\" onclick={makeApplyStyle('dsuccess')} />, 400);\n\n    return items;\n  }\n  bar(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      black: { prefix: '[pbar]Back-end,40% Complete,black,black,gray,1,40,20,0', suffix: '[/pbar]', trimFirst: true },\n      blue: { prefix: '[pbar]Front-end,30% Complete,black,blue,teal,1,30,10,80', suffix: '[/pbar]', trimFirst: true },\n      red: { prefix: '[pbar]Total,70% Complete,black,red,pink,1,70,5,40', suffix: '[/pbar]', trimFirst: true },\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      //items.add(\"h2\", makeShortcut(\"h2\", \"2\", this));\n      //items.add(\"h3\", makeShortcut(\"h3\", \"3\", this));\n      //items.add('h4', makeShortcut('h4', '4', this));\n    //});\n\n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('black', <MarkdownButton title={tooltip('button_tooltip_bar_black')} icon=\"fas fa-bar black\" onclick={makeApplyStyle('black')} />);\n    items.add('blue', <MarkdownButton title={tooltip('button_tooltip_bar_blue')} icon=\"fas fa-bar blue\" onclick={makeApplyStyle('blue')} />);\n    items.add('red', <MarkdownButton title={tooltip('button_tooltip_bar_red')} icon=\"fas fa-bar red\" onclick={makeApplyStyle('red')} />);\n    \n    return items;\n  }\n  image_add(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      img: { prefix: '[IMG src=\"URL\" title=\"AddTitle\" alt=\"AddTitle\" height=\"auto\" width=\"auto\"]', trimFirst: true },\n      img_left: { prefix: '[Ileft]\\n[IMG src=\"URL\" title=\"AddTitle\" alt=\"AddTitle\" height=\"auto\" width=\"auto\"] Insert Text or Remove\\n[/Ileft]', trimFirst: true },\n      img_center: { prefix: '[Icenter]\\n[IMG src=\"URL\" title=\"AddTitle\" alt=\"AddTitle\" height=\"auto\" width=\"auto\"] Insert Text or Remove\\n[/Icenter]', trimFirst: true },\n      img_right: { prefix: '[Iright]\\n[IMG src=\"URL\" title=\"AddTitle\" alt=\"AddTitle\" height=\"auto\" width=\"auto\"] Insert Text or Remove\\n[/Iright]', trimFirst: true },\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      //items.add(\"img_left\", makeShortcut(\"img_left\", \"2\", this));\n      //items.add(\"img_center\", makeShortcut(\"img_center\", \"3\", this));\n      //items.add('img_right', makeShortcut('img_right', '4', this));\n    //});\n  \n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('img', <MarkdownButton title={tooltip('button_tooltip_img')} icon=\"fas fa-image yellow\" onclick={makeApplyStyle('img')} />);\n    items.add('img_left', <MarkdownButton title={tooltip('button_tooltip_img_left')} icon=\"fas fa-align-left blue\" onclick={makeApplyStyle('img_left')} />);\n    items.add('img_center', <MarkdownButton title={tooltip('button_tooltip_img_center')} icon=\"fas fa-align-center green\" onclick={makeApplyStyle('img_center')} />);\n    items.add('img_right', <MarkdownButton title={tooltip('button_tooltip_img_right')} icon=\"fas fa-align-right red\" onclick={makeApplyStyle('img_right')} />);\n    \n    return items;\n  }\n  text_add(oldFunc) {\n    const items = typeof oldFunc === \"function\" ? oldFunc() : new ItemList();\n\n    const modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\n    const styles = {\n      ins: { prefix: '[ins] ', suffix: ' [/ins]', trimFirst: true },\n      del: { prefix: '[del] ', suffix: ' [/del]', trimFirst: true },\n      sup: { prefix: '[sup]', suffix: ' [/sup]', trimFirst: true },\n      sub: { prefix: '[sub]', suffix: ' [/sub]', trimFirst: true },\n      var: { prefix: '[var]', suffix: ' [/var]', trimFirst: true },\n      acronym: { prefix: '[acronym title=\"TITLE\"] TEXT', suffix: ' [/acronym]', trimFirst: true },\n      background: { prefix: '[background=\"silver\"] TEXT', suffix: ' [/background]', trimFirst: true },\n      hr: { prefix: '[hr]', trimFirst: true },\n      float_left: { prefix: '[float=left] ', suffix: ' [/float]', trimFirst: true },\n      float_right: { prefix: '[float=right] ', suffix: ' [/float]', trimFirst: true },\n      dropcap: { prefix: '[dropcap] ', suffix: ' [/dropcap]', trimFirst: true },\n\n    };\n\n    //extend(BasicEditorDriver.prototype, 'keyHandlers', function (items) {\n      //items.add(\"img_left\", makeShortcut(\"img_left\", \"2\", this));\n      //items.add(\"img_center\", makeShortcut(\"img_center\", \"3\", this));\n      //items.add('img_right', makeShortcut('img_right', '4', this));\n    //});\n  \n    const applyStyle = (id, editorDriver) => {\n      // This is a nasty hack that breaks encapsulation of the editor.\n      // In future releases, we'll need to tweak the editor driver interface\n      // to support triggering events like this.\n      styleSelectedText(editorDriver.el, styles[id]);\n    };\n\n    function makeShortcut(id, key, editorDriver) {\n      return function (e) {\n        if (e.key === key && ((e.metaKey && modifierKey === '⌘') || (e.ctrlKey && modifierKey === 'ctrl'))) {\n          e.preventDefault();\n          applyStyle(id, editorDriver);\n        }\n      };\n    }\n\n    function tooltip(name, hotkey) {\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}_tooltip`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n      //return app.translator.trans(`imeepo-more-bbcode.forum.${name}`);\n      return app.translator.trans(`imeepo-more-bbcode.forum.${name}`) + (hotkey ? ` <${modifierKey}-${hotkey}>` : '');\n    }\n\n    const makeApplyStyle = (id) => {\n      return () => applyStyle(id, this.attrs.textEditor);\n    };\n\n    items.add('ins', <MarkdownButton title={tooltip('button_tooltip_ins')} icon=\"fas fa-underline brown\" onclick={makeApplyStyle('ins')} />);\n    //items.add('del', <MarkdownButton title={tooltip('button_tooltip_del')} icon=\"fas fa-strikethrough blue\" onclick={makeApplyStyle('del')} />);\n    items.add('sup', <MarkdownButton title={tooltip('button_tooltip_sup')} icon=\"fas fa-superscript green\" onclick={makeApplyStyle('sup')} />);\n    items.add('sub', <MarkdownButton title={tooltip('button_tooltip_sub')} icon=\"fas fa-subscript orange\" onclick={makeApplyStyle('sub')} />);\n    //items.add('var', <MarkdownButton title={tooltip('button_tooltip_var')} icon=\"fas fa-var grey\" onclick={makeApplyStyle('var')} />);\n    items.add('acronym', <MarkdownButton title={tooltip('button_tooltip_acronym')} icon=\"fas fa-acronym purple\" onclick={makeApplyStyle('acronym')} />);\n    items.add('background', <MarkdownButton title={tooltip('button_tooltip_background')} icon=\"fas fa-background white\" onclick={makeApplyStyle('background')} />);\n    items.add('hr', <MarkdownButton title={tooltip('button_tooltip_hr')} icon=\"fas fa-minus pink\" onclick={makeApplyStyle('hr')} />);\n    items.add('float_left', <MarkdownButton title={tooltip('button_tooltip_float_left')} icon=\"fas fa-arrow-left red\" onclick={makeApplyStyle('float_left')} />);\n    items.add('float_right', <MarkdownButton title={tooltip('button_tooltip_float_right')} icon=\"fas fa-arrow-right red\" onclick={makeApplyStyle('float_right')} />);\n    items.add('dropcap', <MarkdownButton title={tooltip('button_tooltip_dropcap')} icon=\"fas fa-list-alt\" onclick={makeApplyStyle('dropcap')} />);\n\n    return items;\n  }\n\n\n}\n\napp.initializers.add(\"litalino/more-bbcode\", () => {\n  extend(CommentPost.prototype, \"content\", function () {\n    if (app.session.user && app.current.matches(DiscussionPage)) {\n      $(\".reply2see_reply\")\n        .off(\"click\")\n        .on(\"click\", () =>\n          DiscussionControls.replyAction.call(\n            app.current.get(\"discussion\"),\n            true,\n            false\n          )\n        );\n      $(\".like2see_like\")\n        .off(\"click\")\n        .on(\"click\", () =>\n          DiscussionControls.likesAction.call(\n            app.current.get(\"discussion\"),\n            true,\n            false\n          )\n        );\n    } else {\n      $(\".reply2see_reply\")\n        .off(\"click\")\n        .on(\"click\", () => app.modal.show(LogInModal));\n      $(\".login2see_login\")\n        .off(\"click\")\n        .on(\"click\", () => app.modal.show(LogInModal));\n      $(\".like2see_like\")\n        .off(\"click\")\n        .on(\"click\", () => app.modal.show(LogInModal));\n    }\n  });\n\n  // TODO: Find a better way to trigger this.\n  //window.addEventListener('load', function() {\n  //\tpopulateGDocs();\n  //});\n\n  extend(PostStream.prototype, \"oncreate\", function () {\n    populateGDocs();\n  });\n\n  /*extend(TextEditor.prototype, \"toolbarItems\", function (items) {\n    \n    items.add(\n      \"bbextend-google-doc\",\n      <TextEditorButton\n        onclick={() => {\n          this.attrs.composer.editor.insertAtCursor(\"[gdoc][/gdoc]\");\n          const range = this.attrs.composer.editor.getSelectionRange();\n          this.attrs.composer.editor.moveCursorTo(range[1] - 8);\n        }}\n        icon=\"fas fa-file-word\"\n      >\n      {app.translator.trans(\"imeepo-more-bbcode.forum.button_tooltip_word\")}\n      </TextEditorButton>\n    );\n  });*/\n\n  //bbcode-tabs\n  let id = 0;\n\n\n  const createTabs = function () {\n    const containers = this.$(\".tabs\");\n\n    containers.each((i, container) => {\n      const $container = $(container);\n\n      if ($container.find('input[type=\"radio\"][name]').length) return;\n\n      const $inputs = $container.find('> .tab > input[type=\"radio\"]');\n\n      if (!$inputs.length) return;\n\n      const $items = $container.find(\".tab\");\n      const num = id++;\n\n      $inputs.attr(\"name\", `tab-group-${num}`);\n\n      if (!$inputs.is(\"[checked]\"))\n        $inputs[0].setAttribute(\"checked\", \"checked\");\n\n      $items.each((i, item) => {\n        const $item = $(item);\n        const id = `tab-${num}-${++i}`;\n\n        $item.find('input[type=\"radio\"]').attr(\"id\", id);\n        $item.find(\"label\").attr(\"for\", id);\n      });\n    });\n  };\n\n  extend(CommentPost.prototype, [\"oncreate\", \"onupdate\"], createTabs);\n  extend(ComposerPostPreview.prototype, \"oncreate\", function () {\n    extend(this.attrs, \"surround\", () => createTabs.call(this));\n  });\n\n});\n\n// Extra style attributes that are added to each line.\n// There's a couple things that need manual tweaking.\nvar extraDocStyles = 'margin-bottom: 0;';\n\nfunction populateGDocs() {\n\tvar posts = document.getElementsByClassName('Post-body');\n\tif (posts.length == 0) { return; }\n\n\tfor (var i = 0; i < posts.length; i++) {\n\t\tvar post = posts[i];\n\t\tvar gdocs = post.getElementsByClassName('bbextend-gdoc');\n\t\tfor (var j = 0; j < gdocs.length; j++) {\n\t\t\tvar gdoc = gdocs[j];\n\t\t\tvar url = gdoc.getElementsByTagName('a')[0].getAttribute('href');\n\n\t\t\t// Remove the class from gdoc so we only try to process it once.\n\t\t\tgdoc.classList.remove('bbextend-gdoc');\n\n\t\t\tif (!url.startsWith('https://docs.google.com/document/d/')) {\n\t\t\t\tgdoc.innerHTML = '<i class=\"fas fa-triangle-exclamation\"></i> Invalid Google Doc URL';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tgdoc.innerHTML = '<i class=\"fas fa-ellipsis fa-fade\"></i> Loading Google Doc...';\n\n\t\t\t// remove anything after the last slash of the url.\n\t\t\turl = url.substring(0, url.lastIndexOf('/'));\n\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', url + '/pub', true);\n\n\t\t\txhr.responseType = 'document';\n\n\t\t\txhr.onload = function() {\n\t\t\t\tif (this.status == 200) {\n\t\t\t\t\tvar doc = this.responseXML;\n\t\t\t\t\tvar html = doc.getElementsByTagName('body')[0].innerHTML;\n\n\t\t\t\t\tgdoc.innerHTML = html;\n\n\t\t\t\t\t// We get the part of the html we want and get rid of the rest.\n\t\t\t\t\t// Basiclly we just keep the style information and the actual document body.\n\t\t\t\t\tvar contents = gdoc.childNodes[1];\n\n\t\t\t\t\twhile (gdoc.firstChild) {\n\t\t\t\t\t\tgdoc.removeChild(gdoc.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\tgdoc.appendChild(contents);\n\n\t\t\t\t\tvar style = gdoc.childNodes[0].childNodes[0].innerHTML;\n\t\t\t\t\tvar div = gdoc.childNodes[0].childNodes[1];\n\n\t\t\t\t\t// Pharse the <style> element from the google doc.\n\t\t\t\t\t// We're reformatting it into strings that can be put directly in the style tag of the elements.\n\t\t\t\t\tvar styles = {};\n\n\t\t\t\t\tstyle.split('}').forEach(function(e) {\n\t\t\t\t\t\tvar parts = e.split('{');\n\n\t\t\t\t\t\tvar element = parts[0];\n\t\t\t\t\t\tvar style = parts[1];\n\n\t\t\t\t\t\tif (!style) { return; }\n\n\t\t\t\t\t\tstyles[element] = style + \";\";\n\n\t\t\t\t\t\t//console.log(element, styles[element]);\n\t\t\t\t\t});\n\n\t\t\t\t\tgdoc.childNodes[0].removeChild(gdoc.childNodes[0].childNodes[0]);\n\n\t\t\t\t\tfunction applyStyle(element) {\n\t\t\t\t\t\tif (element.childNodes.length > 0) {\n\t\t\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\t\t\t\t\t\t\t\tapplyStyle(element.childNodes[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!element.className) { return; }\n\n\t\t\t\t\t\tvar classes = element.className.split(' ');\n\n\t\t\t\t\t\tvar styleString = '';\n\n\t\t\t\t\t\tclasses.forEach(function(e) {\n\t\t\t\t\t\t\tstyleString += styles['.' + e];\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\telement.setAttribute('style', styleString + extraDocStyles);\n\n\t\t\t\t\t\t// Just in case theres anything in Flarum that'll match the class name.\n\t\t\t\t\t\t// This is because we want to follow google doc's style exclusively.\n\t\t\t\t\t\telement.removeAttribute('class');\n\t\t\t\t\t}\n\n\t\t\t\t\tapplyStyle(div);\n\n\t\t\t\t\t// We need to manually override the max-width of the document to fill the post container.\n\t\t\t\t\tvar divStyle = div.getAttribute('style').split(';');\n\n\t\t\t\t\tdivStyle.forEach(function(e, i) {\n\t\t\t\t\t\tif (e.includes('max-width')) {\n\t\t\t\t\t\t\tdivStyle[i] = 'max-width: 100%';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Fallback to make sure the text is readable, sometimes it doesn't import with a color set.\n\t\t\t\t\tdiv.setAttribute('style', 'color: #000;' + divStyle.join(';'));\n\n\t\t\t\t\tvar link = document.createElement('a');\n\t\t\t\t\tlink.setAttribute('href', url);\n\t\t\t\t\tlink.setAttribute('target', '_blank');\n\t\t\t\t\tlink.innerHTML = '<i class=\"fas fa-file-word\"></i> View Google Doc';\n\n\t\t\t\t\tgdoc.appendChild(link);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.onerror = function() {\n\t\t\t\tgdoc.innerHTML = '<i class=\"fas fa-triangle-exclamation\"></i> Failed to load Google Doc';\n\t\t\t};\n\n\t\t\txhr.send();\n\t\t}\n\t}\n};","/*\n * This file is part of MathRen.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/common/app';\nimport addTextEditorButton from './addTextEditorButton';\n\napp.initializers.add(\n  'litalino-more-bbcode',\n  () => {\n    // Add text editor buttons.\n    addTextEditorButton();\n     \n  },\n  -500 // since we're overriding things...\n);\n","import { extend } from \"flarum/extend\";\nimport TextEditor from \"flarum/components/TextEditor\";\nimport TextEditorButton from \"./TextEditorButton\";\n\nexport default function addTextEditorButton() {\n  extend(TextEditor.prototype, \"toolbarItems\", function (items) {\n      items.add('litalino-more-bbcode', <TextEditorButton textEditor={this.attrs.composer.editor} />);\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","MarkdownButton","_Component","apply","arguments","_proto","oncreate","vnode","view","button","m","className","type","this","attrs","hotkey","onkeydown","keydown","onclick","icon","title","Tooltip","text","event","preventDefault","element","click","Component","TextEditorButton","Dropdown","buttonClassName","label","markdownToolbarItems","toArray","oldFunc","_this","modifierKey","navigator","userAgent","match","styles","header","prefix","bold","suffix","trimFirst","italic","strikethrough","quote","multiline","surroundWithNewlines","code","blockPrefix","blockSuffix","link","replaceNext","scanFor","image","unordered_list","ordered_list","orderedList","spoiler","left","center","right","justify","dropcap","ileft","iright","pleft","pright","details","like","reply","login","cloud","down","audio","clip","table","word","size","color","tab","iframe","bar","extend","BasicEditorDriver","items","add","makeShortcut","applyStyle","id","editorDriver","styleSelectedText","el","ItemList","e","metaKey","ctrlKey","tooltip","name","app","trans","makeApplyStyle","textEditor","heading","image_add","text_add","alert","_this2","size_18","size_20","size_22","size_24","size_26","size_28","size_30","size_32","size_34","size_36","size_38","size_40","_this3","color_grey","color_green","color_blue","color_purple","color_yellow","color_orange","color_red","color_silver","color_pink","color_brown","color_white","color_black","_this4","h2","h3","h4","h5","h6","_this5","warning","asuccess","ainfo","abasic","acustom","bcustom","bwarning","bsuccess","berror","bnotice","cwarning","cnotice","cerror","csuccess","dnotice","derror","dwarning","dsuccess","_this6","black","blue","red","_this7","img","img_left","img_center","img_right","_this8","ins","del","sup","sub","var","acronym","background","hr","float_left","float_right","CommentPost","user","matches","DiscussionPage","$","off","on","DiscussionControls","show","LogInModal","PostStream","posts","document","getElementsByClassName","length","i","gdocs","j","gdoc","url","getElementsByTagName","getAttribute","classList","remove","startsWith","innerHTML","substring","lastIndexOf","xhr","XMLHttpRequest","open","responseType","onload","status","html","responseXML","contents","childNodes","firstChild","removeChild","appendChild","style","div","split","forEach","parts","classes","styleString","setAttribute","extraDocStyles","removeAttribute","divStyle","includes","join","createElement","onerror","send","populateGDocs","createTabs","each","container","$container","find","$inputs","$items","num","attr","is","item","$item","ComposerPostPreview","_this9","TextEditor","composer","editor"],"sourceRoot":""}
>>>>>>> litalino/master
